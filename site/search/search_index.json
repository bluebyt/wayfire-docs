{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Wayfire","text":""},{"location":"#get-started-manual-configuration","title":"Get started | Manual | Configuration","text":"<p>Wayfire is a 3D Wayland compositor, inspired by Compiz and based on wlroots.</p> <p>It aims to create a customizable, extendable and lightweight environment without sacrificing its appearance.</p> <p> Wayfire demos</p>"},{"location":"#dependencies","title":"Dependencies","text":""},{"location":"#wayfire-dependencies","title":"Wayfire Dependencies","text":"<p>These are the dependencies needed for building Wayfire.</p> <ul> <li>Cairo</li> <li>FreeType</li> <li>GLM</li> <li>libdrm</li> <li>libevdev</li> <li>libGL</li> <li>libinput</li> <li>libjpeg</li> <li>libpng</li> <li>libxkbcommon</li> <li>libxml2</li> <li>Pixman</li> <li>pkg-config</li> <li>Wayland</li> <li>wayland-protocols</li> <li>wf-config</li> <li>wlroots</li> </ul>"},{"location":"#wlroots-dependencies","title":"wlroots Dependencies","text":"<p>These are the dependencies needed for building wlroots, and should be installed before building it. They are relevant for cases when the system doesn't have a version of wlroots installed.</p>"},{"location":"#session-provider-optional-recommended","title":"Session Provider (optional, recommended)","text":"<ul> <li>systemd or</li> <li>elogind or</li> <li>seatd</li> </ul>"},{"location":"#xwayland-support-optional","title":"XWayland Support (optional)","text":"<ul> <li>xcb</li> <li>xcb-composite</li> <li>xcb-render</li> <li>xcb-xfixes</li> </ul>"},{"location":"#x11-backend-optional","title":"X11 Backend (optional)","text":"<ul> <li>xcb</li> <li>x11-xcb</li> <li>xcb-xinput</li> <li>xcb-xfixes</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>The easiest way to install Wayfire, wf-shell and WCM to get a functional desktop is to use the install scripts.</p> <p>Alternatively, you can build from source:</p> <pre><code>meson build\nninja -C build\nsudo ninja -C build install\n</code></pre> <p>Note: <code>wf-config</code> and <code>wlroots</code> can be built as submodules, by specifying <code>-Duse_system_wfconfig=disabled</code> and <code>-Duse_system_wlroots=disabled</code> options to <code>meson</code>. This is the default if they are not present on your system.</p> <p>Installing wf-shell is recommended for a complete experience.</p>"},{"location":"#arch-linux","title":"Arch Linux","text":"<p>wayfire and wayfire-git are available in the AUR.</p> <p><pre><code>yay -S wayfire\n</code></pre> or <pre><code>paru -S wayfire\n</code></pre></p>"},{"location":"#exherbo","title":"Exherbo","text":"<pre><code>cave resolve -x wayfire\n</code></pre>"},{"location":"#fedora","title":"Fedora","text":"<pre><code>dnf install wayfire\n</code></pre>"},{"location":"#freebsd","title":"FreeBSD","text":"<pre><code>pkg install wayfire\n</code></pre>"},{"location":"#gentoo","title":"Gentoo","text":"<p>Install the latest release with <pre><code>emerge --ask --verbose wayfire\n</code></pre> and to use the live version <pre><code>emerge --ask --verbose \"=gui-wm/wayfire-9999\"\n</code></pre></p>"},{"location":"#nixos","title":"NixOS","text":"<p>Enable Wayfire in your NixOS configuration: <pre><code>programs.wayfire = {\n  enable = true;\n  plugins = with pkgs.wayfirePlugins; [\n    wcm\n    wf-shell\n    wayfire-plugins-extra\n  ];\n};\n</code></pre></p>"},{"location":"#ubuntu","title":"Ubuntu","text":"<pre><code>apt install wayfire\n</code></pre>"},{"location":"#void","title":"Void","text":"<pre><code>xbps-install -S wayfire\n</code></pre>"},{"location":"#configuration","title":"Configuration","text":"<p>Copy [<code>wayfire.ini</code>] to <code>~/.config/wayfire.ini</code>. Before running Wayfire, you may want to change the command to start a terminal. See the Configuration document for information on the options.</p>"},{"location":"#running","title":"Running","text":"<p>Run <code>wayfire</code> from a TTY, or via a Wayland-compatible login manager.</p>"},{"location":"Additional-configuration-for-external-applications/","title":"Additional configuration for external applications","text":"<p>An WIP guide for configuring the necessary daemons so that all applications work in Wayfire. If know anything missing here, please add it.</p>"},{"location":"Additional-configuration-for-external-applications/#networking","title":"Networking","text":"<ul> <li>VPN activation fails via NetworkManager </li> </ul> <pre><code>(Error: \"Failed to request VPN secrets #3: No agents were available for this request\").\n</code></pre> <p>gnome-shell provides some agent for NetworkManager that is not running with Wayfire. In GNOME the agent may be provided via <code>network-manager-openvpn-gnome</code> / <code>network-manager-vpnc-gnome</code> / <code>network-manager-openconnect-gnome</code> depending on the selected VPN solution. </p> <p>It seems like a backend service for <code>libsecret</code> is missing. It's either <code>gnome-keyring-daemon</code> or <code>kwallet</code>.</p>"},{"location":"Additional-configuration-for-external-applications/#input","title":"Input","text":"<ul> <li>Selected keyboard layout not applied (U.S. keyboard layout is set)</li> </ul>"},{"location":"Bindings-available-by-default/","title":"Bindings available by default","text":"<p>The following bindings are available by default in 0.8.0, i.e. without needing to specify them in <code>wayfire.ini</code>. Capital-letter representations of alphabetical keys are used for clarity; use of &lt;shift&gt; is not implied nor required.</p>"},{"location":"Bindings-available-by-default/#core","title":"Core","text":""},{"location":"Bindings-available-by-default/#close-focused-window","title":"Close focused window.","text":"<ul> <li><code>core.close_top_view</code> = &lt;super&gt; + Q | &lt;alt&gt; + &lt;f4&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#focus-window-with-mouse","title":"Focus window with mouse.","text":"<ul> <li><code>core.focus_buttons</code> = &lt;mouse-left&gt; | &lt;mouse-middle&gt; | &lt;mouse-right&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#plugins","title":"Plugins","text":"<p>The following bindings become available by default once the relevant plugin is enabled in <code>wayfire.ini</code>.</p>"},{"location":"Bindings-available-by-default/#change-opacity-by-scrolling-with-super-alt","title":"Change opacity by scrolling with Super + Alt.","text":"<ul> <li><code>alpha.modifier</code> = &lt;super&gt; + &lt;alt&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#show-the-current-workspace-row-as-a-cube","title":"Show the current workspace row as a cube.","text":"<ul> <li><code>cube.activate</code> = &lt;ctrl&gt; + &lt;alt&gt; + &lt;mouse-left&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#show-an-overview-of-all-workspaces","title":"Show an overview of all workspaces.","text":"<ul> <li><code>expo.toggle</code> = &lt;super&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#select-a-workspace","title":"Select a workspace.","text":"<p>Workspaces are arranged into a grid of 3 \u00d7 3. The numbering is left to right, line by line:</p> <pre><code>\u21f1 k \u21f2\nh \u23ce l\n\u21f1 j \u21f2\n</code></pre> <p>See <code>core.vwidth</code> and <code>core.vheight</code> for configuring the grid.</p> <ul> <li><code>expo.select_workspace_1</code> = 1</li> <li><code>expo.select_workspace_2</code> = 2</li> <li><code>expo.select_workspace_3</code> = 3</li> <li><code>expo.select_workspace_4</code> = 4</li> <li><code>expo.select_workspace_5</code> = 5</li> <li><code>expo.select_workspace_6</code> = 6</li> <li><code>expo.select_workspace_7</code> = 7</li> <li><code>expo.select_workspace_8</code> = 8</li> <li><code>expo.select_workspace_9</code> = 9</li> </ul>"},{"location":"Bindings-available-by-default/#simple-active-window-switcher","title":"Simple active window switcher.","text":"<ul> <li><code>fast-switcher.activate</code> = &lt;alt&gt; + &lt;esc&gt;</li> <li><code>fast-switcher.activate_backward</code> = &lt;alt&gt; + &lt;shift&gt; + &lt;esc&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#fisheye-effect","title":"Fisheye effect.","text":"<ul> <li><code>fisheye.toggle</code> = &lt;super&gt; + &lt;ctrl&gt; + F</li> </ul>"},{"location":"Bindings-available-by-default/#grid","title":"Grid.","text":"<p>Position the windows in certain regions of the output:</p> <pre><code>\u21f1 \u2191 \u21f2   \u2502 7 8 9\n\u2190 f \u2192   \u2502 4 5 6\n\u21f1 \u2193 \u21f2 d \u2502 1 2 3 0\n</code></pre> <ul> <li><code>grid.slot_bl</code> = &lt;super&gt; + &lt;kp1&gt;</li> <li><code>grid.slot_b</code> = &lt;super&gt; + &lt;kp2&gt;</li> <li><code>grid.slot_br</code> = &lt;super&gt; + &lt;kp3&gt;</li> <li><code>grid.slot_l</code> = &lt;super&gt; + &lt;left&gt; | &lt;super&gt; + &lt;kp4&gt;</li> <li><code>grid.slot_c</code> = &lt;super&gt; + &lt;up&gt; | &lt;super&gt; + &lt;kp5&gt;</li> <li><code>grid.slot_r</code> = &lt;super&gt; + &lt;down&gt; | &lt;super&gt; + &lt;kp6&gt;</li> <li><code>grid.slot_tl</code> = &lt;super&gt; + &lt;kp7&gt;</li> <li><code>grid.slot_t</code> = &lt;super&gt; + &lt;kp8&gt;</li> <li><code>grid.slot_tr</code> = &lt;super&gt; + &lt;kp9&gt;</li> </ul> <p>Restore default.</p> <ul> <li><code>grid.restore</code> = &lt;super&gt; + &lt;down&gt; | &lt;super&gt; + &lt;kp0&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#invert-the-colors-of-the-whole-output","title":"Invert the colors of the whole output.","text":"<ul> <li><code>invert.toggle</code> = &lt;super&gt; + I</li> </ul>"},{"location":"Bindings-available-by-default/#drag-windows-by-holding-down-super-and-left-mouse-button","title":"Drag windows by holding down Super and left mouse button","text":"<ul> <li><code>move.activate</code> = &lt;super&gt; + &lt;mouse-left&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#change-focused-output","title":"Change focused output.","text":"<p>Switch to the next output.</p> <ul> <li><code>oswitch.next_output</code> = &lt;super&gt; + O</li> </ul> <p>Same with the window.</p> <ul> <li><code>oswitch.next_output_with_win</code> = &lt;super&gt; + &lt;shift&gt; + O</li> </ul>"},{"location":"Bindings-available-by-default/#resize-window","title":"Resize window.","text":"<ul> <li><code>resize.activate</code> = &lt;super&gt; + &lt;mouse-left&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#toggle-scaling","title":"Toggle scaling.","text":"<ul> <li><code>scale.toggle</code> = &lt;super&gt; + P</li> </ul>"},{"location":"Bindings-available-by-default/#sway-inspired-tiling","title":"Sway-inspired tiling.","text":"<p>Toggle tiling mode.</p> <ul> <li><code>simple-tile.key_toggle</code> = &lt;super&gt; + T</li> </ul> <p>Move window.</p> <ul> <li><code>simple-tile.button_move</code> = &lt;super&gt; + &lt;mouse-left&gt;</li> </ul> <p>Resize window.</p> <ul> <li><code>simple-tile.button_resize</code> = &lt;super&gt; + &lt;mouse-right&gt;</li> </ul> <p>Move focus to window on left.</p> <ul> <li><code>simple-tile.key_focus_left</code> = &lt;super&gt; + H</li> </ul> <p>Move focus to window on right.</p> <ul> <li><code>simple-tile.key_focus_right</code> = &lt;super&gt; + L</li> </ul> <p>Move focus to window above.</p> <ul> <li><code>simple-tile.key_focus_above</code> = &lt;super&gt; + K</li> </ul> <p>Move focus to window below.</p> <ul> <li><code>simple-tile.key_focus_below</code> = &lt;super&gt; + J</li> </ul>"},{"location":"Bindings-available-by-default/#change-active-window-with-an-animation","title":"Change active window with an animation.","text":"<ul> <li><code>switcher.next_view</code> = &lt;alt&gt; + &lt;tab&gt;</li> <li><code>switcher.prev_view</code> = &lt;alt&gt; + &lt;shift&gt; + &lt;tab&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#switch-to-workspace","title":"Switch to workspace.","text":"<ul> <li><code>vswitch.binding_left</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;left&gt;</li> <li><code>vswitch.binding_down</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;down&gt;</li> <li><code>vswitch.binding_up</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;up&gt;</li> <li><code>vswitch.binding_right</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;right&gt;</li> </ul> <p>Move the focused window with the same key-bindings as above, but with Shift.</p> <ul> <li><code>vswitch.with_win_left</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;shift&gt; + &lt;left&gt;</li> <li><code>vswitch.with_win_down</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;shift&gt; + &lt;down&gt;</li> <li><code>vswitch.with_win_up</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;shift&gt; + &lt;up&gt;</li> <li><code>vswitch.with_win_right</code> = &lt;ctrl&gt; + &lt;super&gt; + &lt;shift&gt; + &lt;right&gt;</li> </ul>"},{"location":"Bindings-available-by-default/#rotate-windows-with-the-mouse","title":"Rotate windows with the mouse.","text":"<p>2D rotation.</p> <ul> <li><code>wrot.activate</code> = &lt;super&gt; + &lt;ctrl&gt; + &lt;mouse-right&gt;</li> </ul> <p>3D rotation.</p> <ul> <li><code>wrot.activate-3d</code> = &lt;super&gt; + &lt;shift&gt; + &lt;mouse-right&gt;</li> </ul> <p>Remove rotation of current view.</p> <ul> <li><code>wrot.reset-one</code> = &lt;super&gt; + R</li> </ul> <p>Remove rotation of all views.</p> <ul> <li><code>wrot.reset</code> = &lt;super&gt; + &lt;ctrl&gt; + R</li> </ul>"},{"location":"Bindings-available-by-default/#zoom-in-the-desktop-by-scrolling-super","title":"Zoom in the desktop by scrolling + Super.","text":"<ul> <li><code>zoom.modifier</code> = &lt;super&gt;</li> </ul>"},{"location":"Configuration/","title":"Configuration file and options","text":"<p>Table of contents</p> <ul> <li>Overview</li> <li>Location</li> <li>Syntax</li> <li>Values</li> <li>Options</li> <li>Accessibility<ul> <li>Invert</li> <li>Zoom</li> </ul> </li> <li>Desktop<ul> <li>Alpha</li> <li>Cube</li> <li>Expo</li> <li>Idle</li> <li>Output switcher</li> <li>Scale</li> <li>Window rules</li> <li>Viewport switcher</li> <li>Viewport swipe</li> <li>Workspace sets</li> </ul> </li> <li>Effects<ul> <li>Animate</li> <li>Blur</li> <li>Decoration</li> <li>Fisheye</li> <li>Wobbly</li> <li>Window rotate</li> </ul> </li> <li>General<ul> <li>Autostart</li> <li>Command</li> <li>Core</li> <li>Input</li> <li>Output</li> <li>Workarounds</li> </ul> </li> <li>Utility<ul> <li>Session lock protocol</li> <li>XDG Activation protocol</li> <li>Input Methods protocol</li> </ul> </li> <li>Window management<ul> <li>Fast switcher</li> <li>Grid</li> <li>Move</li> <li>Place</li> <li>Preserve output</li> <li>Simple tile</li> <li>Switcher</li> <li>Resize</li> <li>WM-Actions</li> </ul> </li> </ul>"},{"location":"Configuration/#overview","title":"Overview","text":"<p>The Wayfire configuration file uses an INI file format, similar to Git. It contains a number of options that affect the Wayland compositor\u2019s behavior.</p> <p>Example</p>"},{"location":"Configuration/#notation","title":"Notation","text":"<p>The variables are divided into sections, wherein the fully qualified variable name of the variable itself is the last dot-separated segment and the section name is everything before the last dot.</p>"},{"location":"Configuration/#location","title":"Location","text":"<p>Wayfire searches for a config file in the following locations, in this order:</p> <ol> <li>$WAYFIRE_CONFIG_FILE</li> <li>$XDG_CONFIG_HOME/wayfire.ini</li> <li>~/.config/wayfire.ini</li> </ol> <p>If unset, $XDG_CONFIG_HOME defaults to ~/.config. After wayfire is started, it will write the current configuration path to the environment variable WAYFIRE_CONFIG_FILE.</p> <p>If you need to customize the configuration path\uff0c set the WAYFIRE_CONFIG_FILE variable before wayfire starts.</p>"},{"location":"Configuration/#syntax","title":"Syntax","text":"<p>The syntax is fairly flexible and permissive; whitespaces are mostly ignored. The <code>#</code> characters begin comments to the end of line, blank lines are ignored.</p> <p>The file consists of sections and variables. A section begins with the name of the section in square brackets and continues until the next section begins. Each variable must belong to some section, which means that there must be a section header before the first setting of a variable.</p> <p>All the other lines (and the remainder of the line after the section header) are recognized as setting variables, in the form <code>name = value</code>. </p> <p>If a <code>value</code> contains the <code>#</code> character it should be escaped using <code>\\</code>.</p>"},{"location":"Configuration/#values","title":"Values","text":"<p>Values of many variables are treated as a simple string, but there are variables that take values of specific types and there are rules as to how to spell them.</p>"},{"location":"Configuration/#boolean","title":"<code>boolean</code>","text":"<p>When a variable is said to take a boolean value, <code>true</code> or <code>false</code>.</p>"},{"location":"Configuration/#integer","title":"<code>integer</code>","text":"<p>The value for numbers.</p>"},{"location":"Configuration/#double","title":"<code>double</code>","text":"<p>The value for floating point numbers.</p>"},{"location":"Configuration/#color","title":"<code>color</code>","text":"<p>The value for a variable that takes a color is a tuple of four floating point numbers (between 0 and 1) in RGBA format.</p>"},{"location":"Configuration/#key-and-button","title":"<code>key</code> and <code>button</code>","text":"<p>The value represents a key combo, also called chord. A key combo is a key sequence in which the keys are pressed at the same time.</p> <p>Keys are space-separated and can be:</p> <ul> <li>Modifier</li> <li><code>&lt;shift&gt;</code></li> <li><code>&lt;ctrl&gt;</code></li> <li><code>&lt;alt&gt;</code></li> <li><code>&lt;super&gt;</code></li> <li>Key</li> <li>Button</li> </ul> <p>See Keys for a complete reference of key and button names. The document is based on [<code>input-event-codes.h</code>] from the Linux kernel.</p>"},{"location":"Configuration/#gesture","title":"<code>gesture</code>","text":"<p>The value represents a touchscreen gesture, as follows:</p> <pre><code>pinch [in|out] &lt;finger-count&gt;\nswipe [up|down|left|right] &lt;finger-count&gt;\nedge-swipe [up|down|left|right] &lt;finger-count&gt;\n</code></pre> <p>Note: e.g. edge-swipe right means swiping from left to right.</p> <p>Defined in:</p> <ul> <li><code>wf-config/src/types.cpp</code></li> </ul> <p>Set input.gesture_sensitivity to change the sensitivity of the built-in gesture detection. Higher values mean that less finger movement is required to trigger the gesture. Default 1.0, min 0.1, max 5.0. Changing requires restart. Defined in:</p> <ul> <li><code>metadata/input.xml</code></li> </ul>"},{"location":"Configuration/#hotspot","title":"<code>hotspot</code>","text":"<p>It is also possible to activate items by a \"hot corner\"</p> <p>Example: <code>hotspot top-left 100x10 1000</code></p> <p>where 100x10 is the width x height of the corner</p> <p>and the 1000 being the time the input (mouse or touch) needs to be inside that area.</p>"},{"location":"Configuration/#activator","title":"<code>activator</code>","text":"<p>The value represents a group of bindings which can all be used for the same action.</p> <p>The bindings can be [<code>key</code>]s, [<code>button</code>]s and [<code>gesture</code>]s, [<code>hotspot</code>]s, separated by a <code>|</code>.</p> <p>Example:</p> <p><code>&lt;super&gt; KEY_E | &lt;ctrl&gt; &lt;alt&gt; BTN_EXTRA | pinch in 4</code></p>"},{"location":"Configuration/#criteria","title":"<code>criteria</code>","text":"<p>The value represents command criteria to affect certain windows, as follows:</p> <pre><code>title [is|contains] \"&lt;string&gt;\"\napp_id [is|contains] \"&lt;string&gt;\"\ntype is [\"toplevel\"|\"x-or\"|\"unmanaged\"|\"background\"|\"panel\"|\"overlay\"|\"unknown\"]\nfocusable is [true|false]\nrole is [\"TOPLEVEL\"|\"UNMANAGED\"|\"DESKTOP_ENVIRONMENT\"]\nfullscreen is [true|false]\nactivated is [true|false]\nminimized is [true|false]\nmaximized is [true|false]\nfloating is [true|false]\ntiled-left is [true|false]\ntiled-right is [true|false]\ntiled-top is [true|false]\ntiled-bottom is [true|false]\n</code></pre> <p>These basic criteria can be combined arbitrarily with parenthesis <code>(...)</code> and logical operators <code>!</code>, <code>&amp;</code>, <code>|</code>. Note that to chain three criteria together with a logical and, you need parenthesis because there is no order of the operators (so it will be <code>((critA &amp; critB) &amp; critC)</code>). In addition, there are the special values <code>all</code> and <code>none</code>, which are always evaluated to <code>true</code> and <code>false</code> respectively.</p> <p>Defined in: - <code>src/api/wayfire/view-access-interface.hpp</code> - <code>src/api/wayfire/matcher.hpp</code></p>"},{"location":"Configuration/#options","title":"Options","text":""},{"location":"Configuration/#accessibility","title":"Accessibility","text":""},{"location":"Configuration/#invert","title":"Invert","text":"<p>A plugin to invert the colors of the whole output.</p> <p>Defined in:</p> <ul> <li><code>metadata/invert.xml</code></li> <li><code>plugins/single_plugins/invert.cpp</code></li> </ul>"},{"location":"Configuration/#inverttoggle","title":"<code>invert.toggle</code>","text":"<p>Inverts the colors of the whole output with the specified activator.</p>"},{"location":"Configuration/#zoom","title":"Zoom","text":"<p>A plugin to zoom in the desktop with the mouse.</p> <p>Defined in:</p> <ul> <li><code>metadata/zoom.xml</code></li> <li><code>plugins/single_plugins/zoom.cpp</code></li> </ul>"},{"location":"Configuration/#zoommodifier","title":"<code>zoom.modifier</code>","text":"<p>Scrolls with the specified modifier to zoom in and out.</p>"},{"location":"Configuration/#zoomsmoothing_duration","title":"<code>zoom.smoothing_duration</code>","text":"<p>Sets the smoothing duration in milliseconds. The default is 300.</p>"},{"location":"Configuration/#zoomspeed","title":"<code>zoom.speed</code>","text":"<p>Sets the speed factor for zooming. The default is 0.01.</p>"},{"location":"Configuration/#desktop","title":"Desktop","text":""},{"location":"Configuration/#alpha","title":"Alpha","text":"<p>A plugin to change the opacity of windows.</p> <p>Defined in:</p> <ul> <li><code>metadata/alpha.xml</code></li> <li><code>plugins/single_plugins/alpha.cpp</code></li> </ul>"},{"location":"Configuration/#alphamin_value","title":"<code>alpha.min_value</code>","text":"<p>Sets the minimum opacity of the window between 0 (completely transparent) and 1 (completely opaque). The default is 0.1.</p>"},{"location":"Configuration/#alphamodifier","title":"<code>alpha.modifier</code>","text":"<p>When the modifier key is held down, you can scroll down and up to adjust the opacity of the window.</p>"},{"location":"Configuration/#cube","title":"Cube","text":"<p>A plugin to show the current workspace row as a cube.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/cube.xml</code></li> <li><code>plugins/cube/cube.cpp</code></li> <li><code>plugins/cube/cube.hpp</code></li> <li><code>plugins/cube/cubemap.hpp</code></li> <li><code>plugins/cube/simple-background.hpp</code></li> <li><code>plugins/cube/skydome.hpp</code></li> </ul>"},{"location":"Configuration/#cubeactivate","title":"<code>cube.activate</code>","text":"<p>Activates the cube with the specified button.</p>"},{"location":"Configuration/#cubebackground","title":"<code>cube.background</code>","text":"<p>Sets the background color for the simple background mode. The default is <code>0.1 0.1 0.1 1.0</code>.</p>"},{"location":"Configuration/#cubebackground_mode","title":"<code>cube.background_mode</code>","text":"<p>Sets the background mode.</p> <p>Possible values are:</p> <ul> <li><code>simple</code></li> <li><code>skydome</code></li> <li><code>cubemap</code></li> </ul> <p>The default is <code>simple</code>.</p> <p>See Cube mapping for details.</p>"},{"location":"Configuration/#cubecubemap_image","title":"<code>cube.cubemap_image</code>","text":"<p>Loads the specified image for the cubemap background mode.</p>"},{"location":"Configuration/#cubedeform","title":"<code>cube.deform</code>","text":"<p>Specifies the deformation to be used.</p> <p>Possible values are:</p> <ul> <li>0 \u2192 None</li> <li>1 \u2192 Cylinder</li> <li>2 \u2192 Star</li> </ul> <p>The default is 0.</p> <p>Deform values 1 and 2 are supported only with OpenGL ES 3.2 support.</p>"},{"location":"Configuration/#cubeinitial_animation","title":"<code>cube.initial_animation</code>","text":"<p>Sets the initial animation duration in milliseconds. The default is 350.</p>"},{"location":"Configuration/#cubelight","title":"<code>cube.light</code>","text":"<p>Specifies whether to use lighting. The default is true.</p>"},{"location":"Configuration/#cuberotate_left","title":"<code>cube.rotate_left</code>","text":"<p>Rotates left with the specified activator.</p>"},{"location":"Configuration/#cuberotate_right","title":"<code>cube.rotate_right</code>","text":"<p>Rotates right with the specified activator.</p>"},{"location":"Configuration/#cubeskydome_mirror","title":"<code>cube.skydome_mirror</code>","text":"<p>Specifies whether to mirror skydome. The default is true.</p>"},{"location":"Configuration/#cubeskydome_texture","title":"<code>cube.skydome_texture</code>","text":"<p>Loads the specified texture for the skydome background mode.</p>"},{"location":"Configuration/#cubespeed_spin_horiz","title":"<code>cube.speed_spin_horiz</code>","text":"<p>Sets the velocity of horizontal spinning. The default is 0.02.</p>"},{"location":"Configuration/#cubespeed_spin_vert","title":"<code>cube.speed_spin_vert</code>","text":"<p>Sets the velocity of vertical spinning. The default is 0.02.</p>"},{"location":"Configuration/#cubespeed_zoom","title":"<code>cube.speed_zoom</code>","text":"<p>Sets the speed factor for zooming. The default is 0.07.</p>"},{"location":"Configuration/#cubezoom","title":"<code>cube.zoom</code>","text":"<p>Sets the level of zoom out. Setting the value to 0.0 means to not zoom out. The default is 0.1.</p>"},{"location":"Configuration/#expo","title":"Expo","text":"<p>A plugin to show an overview of all workspaces.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/expo.xml</code></li> <li><code>plugins/single_plugins/expo.cpp</code></li> </ul>"},{"location":"Configuration/#expobackground","title":"<code>expo.background</code>","text":"<p>Sets the background color. The default is <code>0.1 0.1 0.1 1.0</code>.</p>"},{"location":"Configuration/#expoduration","title":"<code>expo.duration</code>","text":"<p>Sets the zoom duration in milliseconds. The default is 300.</p>"},{"location":"Configuration/#expooffset","title":"<code>expo.offset</code>","text":"<p>Sets the delimiter offset (in pixels) between workspaces. The default is 10.0.</p>"},{"location":"Configuration/#exposelect_workspace_number","title":"<code>expo.select_workspace_&lt;number&gt;</code>","text":"<p>Selects the given workspace with the specified key. The numbering is left to right, line by line.</p>"},{"location":"Configuration/#expotoggle","title":"<code>expo.toggle</code>","text":"<p>Shows an overview of all workspaces with the specified activator. Pressing again exits.</p>"},{"location":"Configuration/#idle","title":"Idle","text":"<p>A plugin for idle settings, such as the screensaver and DPMS.</p> <p>Defined in:</p> <ul> <li><code>metadata/idle.xml</code></li> <li><code>plugins/single_plugins/idle.cpp</code></li> </ul>"},{"location":"Configuration/#idlecube_max_zoom","title":"<code>idle.cube_max_zoom</code>","text":"<p>Sets the maximum zoom level. The default is 1.5.</p>"},{"location":"Configuration/#idlecube_rotate_speed","title":"<code>idle.cube_rotate_speed</code>","text":"<p>Sets the speed rotation of the cube. The default is 1.0.</p>"},{"location":"Configuration/#idlecube_zoom_speed","title":"<code>idle.cube_zoom_speed</code>","text":"<p>Sets the zoom speed. The speed means how long it will take from the time the screensaver starts to the time the cube reaches <code>idle.cube_max_zoom</code>. The default is 1000.</p>"},{"location":"Configuration/#idledisable_on_fullscreen","title":"<code>idle.disable_on_fullscreen</code>","text":"<p>Disables idle on fullscreen. The default is true.</p>"},{"location":"Configuration/#idledpms_timeout","title":"<code>idle.dpms_timeout</code>","text":"<p>Enters power saving mode after the specified seconds of inactivity. Setting the value to -1 disables power saving. The default is -1.</p>"},{"location":"Configuration/#idlescreensaver_timeout","title":"<code>idle.screensaver_timeout</code>","text":"<p>Displays the screensaver after the specified seconds of inactivity. Setting the value to -1 disables the screensaver. The default is -1.</p>"},{"location":"Configuration/#idletoggle","title":"<code>idle.toggle</code>","text":"<p>Disables the compositor going idle with the specified activator. Pressing again reactivates.</p>"},{"location":"Configuration/#output-switcher","title":"Output switcher","text":"<p>A plugin to change the focused output.</p> <p>Defined in:</p> <ul> <li><code>metadata/oswitch.xml</code></li> <li><code>plugins/single_plugins/oswitch.cpp</code></li> </ul>"},{"location":"Configuration/#oswitchnext_output","title":"<code>oswitch.next_output</code>","text":"<p>Moves focus to the next output with the specified activator.</p>"},{"location":"Configuration/#oswitchnext_output_with_win","title":"<code>oswitch.next_output_with_win</code>","text":"<p>Moves focus to the next output with the focused window with the specified activator.</p>"},{"location":"Configuration/#scale","title":"Scale","text":"<p>A plugin which shows all the windows on the current or on all workspaces, similar to GNOME's Overview.</p> <p>Defined in:</p> <ul> <li><code>metadata/scale.xml</code> </li> <li><code>plugins/scale/scale.cpp</code> </li> </ul>"},{"location":"Configuration/#scaletoggle","title":"<code>scale.toggle</code>","text":"<p>Toggle scale for the windows on the current workspace. Default is  KEY_P."},{"location":"Configuration/#scaletoggle_all","title":"<code>scale.toggle_all</code>","text":"<p>Toggle scale for the windows on all workspaces. disabled by default.</p>"},{"location":"Configuration/#scalespacing","title":"<code>scale.spacing</code>","text":"<p>The spacing between adjacent windows when scaled. Default is 50 pixels.</p>"},{"location":"Configuration/#scaleduration","title":"<code>scale.duration</code>","text":"<p>The duration of the scale initial animation. Default is 750 milliseconds.</p>"},{"location":"Configuration/#scaleinteract","title":"<code>scale.interact</code>","text":"<p>Whether scale is started in interactive mode. Interactive mode allows the user to actually type or click in the scaled windows, and can only be exited by using the toggle bindings.</p> <p>If interactive mode is disabled: - A view may be selected by clicking on it. - The arrow keys can be used to change the currently selected view. - <code>KEY_ENTER</code> will exit scale and focus the selected view. - <code>KEY_ESC</code> will exit scale without changing focus.  </p> <p>Default is false, i.e. not interactive.</p>"},{"location":"Configuration/#scaleinactive_alpha","title":"<code>scale.inactive_alpha</code>","text":"<p>Controls the opacity of windows that are not selected. Default is 0.75 (75% opacity).</p>"},{"location":"Configuration/#scaleallow_zoom","title":"<code>scale.allow_zoom</code>","text":"<p>Controls whether views may be bigger than their regular size when scaled. Default is false.</p>"},{"location":"Configuration/#scalemiddle_click_close","title":"<code>scale.middle_click_close</code>","text":"<p>Make middle click on a window close that window in both interactive and non-interactive mode. Default is false.</p>"},{"location":"Configuration/#scaleinclude_minimized","title":"<code>scale.include_minimized</code>","text":"<p>Whether minimized windows should also be shown in scale. Default is false.</p>"},{"location":"Configuration/#scaleminimized_alpha","title":"<code>scale.minimized_alpha</code>","text":"<p>Controls the opacity of minimized windows when they are shown in scale. Default is 0.45.</p>"},{"location":"Configuration/#scaleclose_on_new_view","title":"<code>scale.close_on_new_view</code>","text":"<p>Automatically closes scale mode if a new window is opened. Default is false.</p>"},{"location":"Configuration/#scaleouter_margin","title":"<code>scale.outer_margin</code>","text":"<p>The margin between scaled windows and the screen edges. Default is 0 pixels.</p>"},{"location":"Configuration/#scaletitle_overlay","title":"<code>scale.title_overlay</code>","text":"<p>Controls whether and how window titles are displayed as overlays in scale. Possible values: - <code>never</code>: never show titles. - <code>mouse</code>: only show the title for the window under the pointer. - <code>all</code>: show titles for all windows.  </p> <p>Default is all.</p>"},{"location":"Configuration/#scaletitle_font_size","title":"<code>scale.title_font_size</code>","text":"<p>Font size (in pixels) for the title overlays. Default is 16.</p>"},{"location":"Configuration/#scaletitle_position","title":"<code>scale.title_position</code>","text":"<p>Controls the position of the window title overlay. Possible values: - <code>top</code> - <code>center</code> - <code>bottom</code> </p> <p>Default is center.</p>"},{"location":"Configuration/#scalebg_color","title":"<code>scale.bg_color</code>","text":"<p>Background color of the window title overlay text, given as RGBA values. Default is 0.1 0.1 0.1 0.9.</p>"},{"location":"Configuration/#scaletext_color","title":"<code>scale.text_color</code>","text":"<p>Text color of the window title overlay, given as RGBA values. Default is 0.8 0.8 0.8 1.0.</p>"},{"location":"Configuration/#window-rules","title":"Window rules","text":"<p>A plugin to apply specific commands to windows by using various criteria.</p> <p>Defined in:</p> <ul> <li><code>metadata/window-rules.xml</code></li> <li><code>plugins/window-rules/window-rules.cpp</code></li> </ul> <p>Rules syntax:</p> <pre><code>rule_name = on &lt;event&gt; if &lt;criteria&gt; then &lt;if_command&gt; [else &lt;else_command&gt;]\nrule_name = on &lt;event&gt; then &lt;command&gt;\n</code></pre> <p>See [<code>criteria</code>] for details on the available conditions.</p> <p>Note 1: <code>if &lt;criteria&gt;</code> can be omitted but special care must be taken, because the rules apply even for panel and background windows. Note 2: <code>rule_name</code> can take any value that is acceptable for a key of the ini format. It would be beneficial to have names that describe the action, like <code>make_term_sticky</code> or <code>&lt;app&gt;_maximize</code>, etc.</p> <p>Available events: - <code>created</code>: A new window has been opened. - <code>(un)maximized</code>: A window has been maximized/unmaximized. - <code>minimized</code>: A window has been minimized. - <code>fullscreened</code>: A window has been fullscreened.</p> <p>Available commands: - <code>set alpha &lt;alpha&gt;</code>: Set window opacity in range <code>[0, 1]</code>. - <code>set geometry X Y W H</code>: Set window geometry. - <code>set always_on_top</code>: Sets window to be always-on-top. - <code>(un)maximize</code>: Maximize or unmaximize the window. - <code>(un)minimize</code>: Minimize or restore the window. - <code>move X Y</code>: Move the window to <code>(X,Y)</code>. - <code>resize W H</code>: Resize the window to size <code>(W, H)</code>. - <code>snap &lt;slot&gt;</code>: Snap the view to a particular slot using the grid plugin. Available slots: <code>top_left</code>, <code>top</code>, <code>top_right</code>, <code>right</code>, <code>bottom_right</code>, <code>bottom</code>, <code>bottom_left</code>, <code>left</code>, <code>center</code>(same as maximize). - <code>assign_workspace X Y</code>: Move the view to workspace with coordinates <code>(X,Y)</code>. The top-left workspace has coordinate (0,0). - <code>sticky</code>: sticky across all workspaces. - <code>start_on_output</code>: start window on specific output. example: <code>start_on_output \"HDMI-A-1\"</code></p> <p>Example \u2013 Maximize each new alacritty window and set its opacity to 50%:</p> <pre><code>[window-rules]\nrule_1 = on created if app_id is \"Alacritty\" then maximize\nrule_2 = on created if app_id is \"Alacritty\" then set alpha 0.5\n</code></pre>"},{"location":"Configuration/#viewport-switcher","title":"Viewport switcher","text":"<p>A plugin to switch workspaces in a grid.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/vswitch.xml</code></li> <li><code>plugins/single_plugins/vswitch.cpp</code></li> </ul>"},{"location":"Configuration/#vswitchbinding_down","title":"<code>vswitch.binding_down</code>","text":"<p>Switches to workspace down with the specified activator.</p>"},{"location":"Configuration/#vswitchbinding_left","title":"<code>vswitch.binding_left</code>","text":"<p>Switches to workspace left with the specified activator.</p>"},{"location":"Configuration/#vswitchbinding_right","title":"<code>vswitch.binding_right</code>","text":"<p>Switches to workspace right with the specified activator.</p>"},{"location":"Configuration/#vswitchbinding_up","title":"<code>vswitch.binding_up</code>","text":"<p>Switches to workspace up with the specified activator.</p>"},{"location":"Configuration/#vswitchbinding_last","title":"<code>vswitch.binding_last</code>","text":"<p>Switches to last active workspace with the specified activator.</p>"},{"location":"Configuration/#vswitchwith_win_down","title":"<code>vswitch.with_win_down</code>","text":"<p>Switches to workspace down with the focused window with the specified activator. For Wayfire version 0.7.X and earlier, this was called <code>vswitch.binding_win_down</code></p>"},{"location":"Configuration/#vswitchwith_win_left","title":"<code>vswitch.with_win_left</code>","text":"<p>Switches to workspace left with the focused window with the specified activator. For Wayfire version 0.7.X and earlier, this was called <code>vswitch.binding_win_left</code></p>"},{"location":"Configuration/#vswitchwith_win_right","title":"<code>vswitch.with_win_right</code>","text":"<p>Switches to workspace right with the focused window with the specified activator. For Wayfire version 0.7.X and earlier, this was called <code>vswitch.binding_win_right</code></p>"},{"location":"Configuration/#vswitchwith_win_up","title":"<code>vswitch.with_win_up</code>","text":"<p>Switches to workspace up with the focused window with the specified activator. For Wayfire version 0.7.X and earlier, this was called <code>vswitch.binding_win_up</code></p>"},{"location":"Configuration/#vswitchsend_win_down","title":"<code>vswitch.send_win_down</code>","text":"<p>Send the focused window to the workspace below. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchsend_win_left","title":"<code>vswitch.send_win_left</code>","text":"<p>Send the focused window to the workspace on the left. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchsend_win_right","title":"<code>vswitch.send_win_right</code>","text":"<p>Send the focused window to the workspace on the right. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchsend_win_up","title":"<code>vswitch.send_win_up</code>","text":"<p>Send the focused window to the workspace above. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchbinding_n","title":"<code>vswitch.binding_&lt;N&gt;</code>","text":"<p>Sets the binding to go to workspace N. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchwith_win_n","title":"<code>vswitch.with_win_&lt;N&gt;</code>","text":"<p>Sets the binding to go to workspace N with currently focused window. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchsend_win_n","title":"<code>vswitch.send_win_&lt;N&gt;</code>","text":"<p>Sets the binding to move focused window to workspace N. Since Wayfire 0.8.0.</p>"},{"location":"Configuration/#vswitchduration","title":"<code>vswitch.duration</code>","text":"<p>Sets the duration of the workspace switching animation in milliseconds. The default is 300.</p>"},{"location":"Configuration/#vswitchgap","title":"<code>vswitch.gap</code>","text":"<p>Sets the gap between workspaces when animating the transition between them. The default is 20.</p>"},{"location":"Configuration/#vswitchbackground","title":"<code>vswitch.background</code>","text":"<p>Sets the background color of gaps. The default is 0.1 0.1 0.1 1.0.</p>"},{"location":"Configuration/#vswitchwraparound","title":"<code>vswitch.wraparound</code>","text":"<p>Whether to wrap around when switching workspaces and there is no workspace in the desired direction. Default is false.</p>"},{"location":"Configuration/#viewport-swipe","title":"Viewport swipe","text":"<p>A plugin to swipe workspaces in a grid.</p> <p>Defined in:</p> <ul> <li><code>metadata/vswipe.xml</code></li> <li><code>plugins/single_plugins/vswipe.cpp</code></li> </ul>"},{"location":"Configuration/#vswipebackground","title":"<code>vswipe.background</code>","text":"<p>Sets the background color. The default is <code>0.1 0.1 0.1 1.0</code>.</p>"},{"location":"Configuration/#vswipedelta_threshold","title":"<code>vswipe.delta_threshold</code>","text":"<p>Sets the delta threshold. The default is 24.0.</p>"},{"location":"Configuration/#vswipeduration","title":"<code>vswipe.duration</code>","text":"<p>Sets the duration of the animation in milliseconds. The default is 180.</p>"},{"location":"Configuration/#vswipeenable_horizontal","title":"<code>vswipe.enable_horizontal</code>","text":"<p>Enables or disables horizontal swiping. The default is true.</p>"},{"location":"Configuration/#vswipeenable_smooth_transition","title":"<code>vswipe.enable_smooth_transition</code>","text":"<p>Enables or disables smooth transition. The default is false.</p>"},{"location":"Configuration/#vswipeenable_vertical","title":"<code>vswipe.enable_vertical</code>","text":"<p>Enables or disables vertical swiping. The default is true.</p>"},{"location":"Configuration/#vswipefingers","title":"<code>vswipe.fingers</code>","text":"<p>Specifies the number of fingers to swipe. The default is 4.</p>"},{"location":"Configuration/#vswipegap","title":"<code>vswipe.gap</code>","text":"<p>Changes the gap in pixels. The default is 32.0.</p>"},{"location":"Configuration/#vswipespeed_cap","title":"<code>vswipe.speed_cap</code>","text":"<p>Sets the speed cap. The default is 0.05.</p>"},{"location":"Configuration/#vswipespeed_factor","title":"<code>vswipe.speed_factor</code>","text":"<p>Sets the speed factor. The default is 256.0.</p>"},{"location":"Configuration/#vswipethreshold","title":"<code>vswipe.threshold</code>","text":"<p>Sets the threshold. The default is 0.35.</p>"},{"location":"Configuration/#workspace-sets","title":"Workspace sets","text":"<p>A plugin which provides multiple workspace grids which can be moved between outputs. See the demo on Youtube.</p>"},{"location":"Configuration/#wsetswset_n","title":"<code>wsets.wset_&lt;N&gt;</code>","text":"<p>An activator binding to switch to workspace set <code>N</code>. Disabled by default.</p>"},{"location":"Configuration/#wsetssend_to_wset_n","title":"<code>wsets.send_to_wset_&lt;N&gt;</code>","text":"<p>An activator binding to send the currently focused window to workspace set <code>N</code>. Disabled by default.</p>"},{"location":"Configuration/#wsetslabel_duration","title":"<code>wsets.label_duration</code>","text":"<p>The duration for which the notification showing the current workspace name should be shown after using a <code>wset_&lt;N&gt;</code> binding. Default is 2000 ms.</p>"},{"location":"Configuration/#effects","title":"Effects","text":""},{"location":"Configuration/#animate","title":"Animate","text":"<p>A plugin which provides animations when a window is opened or closed.</p> <p></p> <p></p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/animate.xml</code></li> <li><code>plugins/animate/animate.cpp</code></li> <li><code>plugins/animate/fire/fire.cpp</code></li> </ul>"},{"location":"Configuration/#animateclose_animation","title":"<code>animate.close_animation</code>","text":"<p>Specifies the type of animation when closing a window.</p> <p>Possible values are:</p> <ul> <li><code>none</code></li> <li><code>fade</code></li> <li><code>zoom</code></li> <li><code>fire</code></li> </ul> <p>The default is <code>zoom</code>.</p>"},{"location":"Configuration/#animateduration","title":"<code>animate.duration</code>","text":"<p>Sets the duration of the animation in milliseconds. The default is 500.</p>"},{"location":"Configuration/#animateenabled_for","title":"<code>animate.enabled_for</code>","text":"<p>Specifies the window types to be animated. The default is <code>(type is \"toplevel\" | (type is \"x-or\" &amp; focusable is true))</code>.</p> <p>See [<code>criteria</code>] for details.</p>"},{"location":"Configuration/#animatefade_duration","title":"<code>animate.fade_duration</code>","text":"<p>Sets the duration for the fade animation in milliseconds. Only applies for windows matched by <code>animate.fade_enabled_for</code>. The default is 400.</p>"},{"location":"Configuration/#animatefade_enabled_for","title":"<code>animate.fade_enabled_for</code>","text":"<p>Specifies the window types to be animated with a fade effect. The default is <code>type is \"overlay\"</code>.</p> <p>See [<code>criteria</code>] for details.</p>"},{"location":"Configuration/#animatefire_duration","title":"<code>animate.fire_duration</code>","text":"<p>Sets the duration for the fire animation in milliseconds. Only applies for windows matched by <code>animate.fire_enabled_for</code>. The default is 300.</p>"},{"location":"Configuration/#animatefire_enabled_for","title":"<code>animate.fire_enabled_for</code>","text":"<p>Specifies the window types to be animated with a fire effect. The default is <code>none</code>.</p> <p>See [<code>criteria</code>] for details.</p>"},{"location":"Configuration/#animatefire_particles","title":"<code>animate.fire_particles</code>","text":"<p>Sets the number of fire particles. The default is 2000.</p>"},{"location":"Configuration/#animatefire_particle_size","title":"<code>animate.fire_particle_size</code>","text":"<p>Sets the size of the fire particles in pixels. The default is 16.0.</p>"},{"location":"Configuration/#animatefire_color","title":"<code>animate.fire_color</code>","text":"<p>Sets the color of the fire effects, alpha is ignored. The default is <code>0.7 0.14 0.01 1.0</code>.</p>"},{"location":"Configuration/#animaterandom_fire_color","title":"<code>animate.random_fire_color</code>","text":"<p>Sets whether to use one solid color or select a random color for each particle. The default is <code>false</code>.</p>"},{"location":"Configuration/#animateopen_animation","title":"<code>animate.open_animation</code>","text":"<p>Specifies the type of animation when opening a window.</p> <p>Possible values are:</p> <ul> <li><code>none</code></li> <li><code>fade</code></li> <li><code>zoom</code></li> <li><code>fire</code></li> </ul> <p>The default is <code>zoom</code>.</p>"},{"location":"Configuration/#animatestartup_duration","title":"<code>animate.startup_duration</code>","text":"<p>Sets the duration of fading (in milliseconds) when Wayfire starts. The default is 600.</p>"},{"location":"Configuration/#animatezoom_duration","title":"<code>animate.zoom_duration</code>","text":"<p>Sets the duration for the zoom animation in milliseconds. Only applies for windows matched by <code>animate.zoom_enabled_for</code>. The default is 500.</p>"},{"location":"Configuration/#animatezoom_enabled_for","title":"<code>animate.zoom_enabled_for</code>","text":"<p>Specifies the window types to be animated with a zoom effect. The default is <code>none</code>.</p> <p>See [<code>criteria</code>] for details.</p>"},{"location":"Configuration/#blur","title":"Blur","text":"<p>A plugin to blur windows.</p> <p>Supported methods:</p> <ul> <li>Bokeh</li> <li>Box</li> <li>Gaussian</li> <li>Kawase</li> </ul> <p>Each method has its own set of options: <code>offset</code>, <code>degrade</code> and <code>iterations</code>. Different combinations result in various levels of blur strength, performance and visual appearance.</p> <p>Defined in:</p> <ul> <li><code>metadata/blur.xml</code></li> <li><code>plugins/blur/blur-base.cpp</code></li> <li><code>plugins/blur/blur.cpp</code></li> <li><code>plugins/blur/bokeh.cpp</code></li> <li><code>plugins/blur/box.cpp</code></li> <li><code>plugins/blur/gaussian.cpp</code></li> <li><code>plugins/blur/kawase.cpp</code></li> </ul>"},{"location":"Configuration/#blurbokeh_degrade","title":"<code>blur.bokeh_degrade</code>","text":"<p>Sets the degrade value for the bokeh method. The value must be between 1 and 5. The default is 1.</p>"},{"location":"Configuration/#blurbokeh_iterations","title":"<code>blur.bokeh_iterations</code>","text":"<p>Sets the iterations for the bokeh method. The value must be between 0 and 250. The default is 15.</p>"},{"location":"Configuration/#blurbokeh_offset","title":"<code>blur.bokeh_offset</code>","text":"<p>Sets the offset value for the bokeh method. The value must be between 0 and 50. The default is 5.</p>"},{"location":"Configuration/#blurbox_degrade","title":"<code>blur.box_degrade</code>","text":"<p>Sets the degrade value for the box method. The value must be between 1 and 5. The default is 1.</p>"},{"location":"Configuration/#blurbox_iterations","title":"<code>blur.box_iterations</code>","text":"<p>Sets the iterations for the box method. The value must be between 0 and 25. The default is 2.</p>"},{"location":"Configuration/#blurbox_offset","title":"<code>blur.box_offset</code>","text":"<p>Sets the offset value for the box method. The value must be between 0 and 25. The default is 2.</p>"},{"location":"Configuration/#blurgaussian_degrade","title":"<code>blur.gaussian_degrade</code>","text":"<p>Sets the degrade value for the gaussian method. The value must be between 1 and 5. The default is 1.</p>"},{"location":"Configuration/#blurgaussian_iterations","title":"<code>blur.gaussian_iterations</code>","text":"<p>Sets the iterations for the gaussian method. The value must be between 0 and 25. The default is 2.</p>"},{"location":"Configuration/#blurgaussian_offset","title":"<code>blur.gaussian_offset</code>","text":"<p>Sets the offset value for the gaussian method. The value must be between 0 and 25. The default is 2.</p>"},{"location":"Configuration/#blurkawase_degrade","title":"<code>blur.kawase_degrade</code>","text":"<p>Sets the degrade value for the kawase method. The value must be between 1 and 5. The default is 1.</p>"},{"location":"Configuration/#blurkawase_iterations","title":"<code>blur.kawase_iterations</code>","text":"<p>Sets the iterations for the kawase method. The value must be between 0 and 10. The default is 2.</p>"},{"location":"Configuration/#blurkawase_offset","title":"<code>blur.kawase_offset</code>","text":"<p>Sets the offset value for the kawase method. The value must be between 0 and 25. The default is 5.</p>"},{"location":"Configuration/#blurmethod","title":"<code>blur.method</code>","text":"<p>Chooses a blur algorithm.  The variants are as follows:</p> <ul> <li><code>bokeh</code></li> <li><code>box</code></li> <li><code>gaussian</code></li> <li><code>kawase</code></li> </ul> <p>The default is <code>kawase</code>.</p>"},{"location":"Configuration/#blurmode","title":"<code>blur.mode</code>","text":"<p>Specifies whether blurring should be automatic or manual. Possible values are <code>normal</code> and <code>toggle</code>. <code>normal</code> means automatic and <code>toggle</code> manual. The default is <code>normal</code>.</p>"},{"location":"Configuration/#blurtoggle","title":"<code>blur.toggle</code>","text":"<p>Sets the shortcut to toggle blurring for a specific window.</p>"},{"location":"Configuration/#decoration","title":"Decoration","text":"<p>Default decorations around Wayland and XWayland windows.</p> <p>Defined in:</p> <ul> <li><code>metadata/decoration.xml</code></li> <li><code>plugins/decor/deco-layout.hpp</code></li> <li><code>plugins/decor/deco-theme.cpp</code></li> <li><code>plugins/decor/deco-theme.hpp</code></li> </ul>"},{"location":"Configuration/#decorationactive_color","title":"<code>decoration.active_color</code>","text":"<p>Sets the color when the window is active. The default is <code>0.6 0.6 0.6 1.0</code>.</p> <p>For its counterpart, see <code>decoration.inactive_color</code>.</p>"},{"location":"Configuration/#decorationborder_size","title":"<code>decoration.border_size</code>","text":"<p>Sets the border size in pixels. The default is 4.</p>"},{"location":"Configuration/#decorationbutton_order","title":"<code>decoration.button_order</code>","text":"<p>Sets the order of the window buttons. The default is <code>minimize maximize close</code>.</p>"},{"location":"Configuration/#decorationfont","title":"<code>decoration.font</code>","text":"<p>Sets the font to use for the title bars, via a Pango font description string (e.g. <code>Gentium Plus 12</code>). The default is <code>sans-serif</code>.</p>"},{"location":"Configuration/#decorationinactive_color","title":"<code>decoration.inactive_color</code>","text":"<p>Sets the color when the window is inactive. The default is <code>0.3 0.3 0.3 1.0</code>.</p> <p>For its counterpart, see <code>decoration.active_color</code>.</p>"},{"location":"Configuration/#decorationtitle_height","title":"<code>decoration.title_height</code>","text":"<p>Sets the height of the title bars in pixels. The default is 30.</p>"},{"location":"Configuration/#decorationignore_views","title":"<code>decoration.ignore_views</code>","text":"<p>Disables decoration for windows matching the specified criteria. The default is <code>none</code>.</p> <p>See [<code>criteria</code>] for details.</p>"},{"location":"Configuration/#fisheye","title":"Fisheye","text":"<p>A plugin which provides fisheye effect.</p> <p>Defined in:</p> <ul> <li><code>metadata/fisheye.xml</code></li> <li><code>plugins/single_plugins/fisheye.cpp</code></li> </ul>"},{"location":"Configuration/#fisheyeradius","title":"<code>fisheye.radius</code>","text":"<p>Sets the border radius in pixels. The default is 450.0.</p>"},{"location":"Configuration/#fisheyetoggle","title":"<code>fisheye.toggle</code>","text":"<p>Toggles fisheye with the specified key.</p>"},{"location":"Configuration/#fisheyezoom","title":"<code>fisheye.zoom</code>","text":"<p>Sets the zoom factor. The default is 7.0.</p>"},{"location":"Configuration/#wobbly","title":"Wobbly","text":"<p>A plugin to get wobbly windows.</p> <p>Defined in:</p> <ul> <li><code>metadata/wobbly.xml</code></li> <li><code>plugins/wobbly/wobbly.cpp</code></li> </ul>"},{"location":"Configuration/#wobblyfriction","title":"<code>wobbly.friction</code>","text":"<p>Sets the friction value. The default is 3.0.</p>"},{"location":"Configuration/#wobblyspring_k","title":"<code>wobbly.spring_k</code>","text":"<p>Sets the spring constant. The default is 8.0.</p>"},{"location":"Configuration/#wobblygrid_resolution","title":"<code>wobbly.grid_resolution</code>","text":"<p>Sets the grid resolution. The default is 6.</p>"},{"location":"Configuration/#window-rotate","title":"Window rotate","text":"<p>A plugin to rotate windows with the mouse. Move the mouse cursor to the center of the window to reset the rotation.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/wrot.xml</code></li> <li><code>plugins/single_plugins/wrot.cpp</code></li> </ul>"},{"location":"Configuration/#wrotactivate","title":"<code>wrot.activate</code>","text":"<p>Rotates the window with the specified button.</p>"},{"location":"Configuration/#general","title":"General","text":""},{"location":"Configuration/#autostart","title":"Autostart","text":"<p>A plugin to run shell commands on startup.</p> <p>Defined in:</p> <ul> <li><code>metadata/autostart.xml</code></li> <li><code>plugins/single_plugins/autostart.cpp</code></li> </ul>"},{"location":"Configuration/#autostartprogram-id-shell-command","title":"<code>autostart.&lt;program-id&gt; &lt;shell-command&gt;</code>","text":"<p>Executes shell command with <code>sh</code> on startup. The program ID does not matter, but must be different for distinct commands.</p>"},{"location":"Configuration/#autostartautostart_wf_shell","title":"<code>autostart.autostart_wf_shell</code>","text":"<p>Executes wf-panel and wf-background if they are not already in the autostart command list. The default is true which means that when no configuration file is preset, wayfire will try to run wf-shell.</p> <p>Example</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nbackground = wf-background\npanel = wf-panel\ndock = wf-dock\n</code></pre>"},{"location":"Configuration/#command","title":"Command","text":"<p>A plugin to bind key combo (key, button, touch) to execute shell commands.</p> <p>Example \u2013 Start a terminal:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nbinding_terminal = &lt;super&gt; KEY_ENTER\ncommand_terminal = alacritty\n</code></pre> <p>Example \u2013 Volume controls:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nrepeatable_binding_volume_up = KEY_VOLUMEUP\ncommand_volume_up = amixer set Master 5%+\nrepeatable_binding_volume_down = KEY_VOLUMEDOWN\ncommand_volume_down = amixer set Master 5%-\n</code></pre> <p>See [<code>key</code>] for more information on the syntax.</p> <p>Defined in:</p> <ul> <li><code>metadata/command.xml</code></li> <li><code>plugins/single_plugins/command.cpp</code></li> </ul>"},{"location":"Configuration/#commandbinding_id-key","title":"<code>command.binding_&lt;id&gt; &lt;key&gt;</code>","text":"<p>Associates <code>binding_&lt;id&gt;</code> to <code>command_&lt;id&gt;</code> when pressing the specified key.</p> <p>See also <code>command.repeatable_binding_&lt;id&gt;</code>.</p>"},{"location":"Configuration/#commandcommand_id-shell-command","title":"<code>command.command_&lt;id&gt; &lt;shell-command&gt;</code>","text":"<p>Executes shell command with <code>sh</code> on associated <code>binding_&lt;id&gt;</code>.</p>"},{"location":"Configuration/#commandrepeatable_binding_id-key","title":"<code>command.repeatable_binding_&lt;id&gt; &lt;key&gt;</code>","text":"<p>Same as <code>command.binding_&lt;id&gt;</code>, but command is repeatable by holding the key.</p>"},{"location":"Configuration/#core","title":"Core","text":"<p>General options.</p> <p>Defined in:</p> <ul> <li><code>metadata/core.xml</code></li> <li><code>src/core/core.cpp</code></li> <li><code>src/core/wm.cpp</code></li> <li><code>src/output/plugin-loader.cpp</code></li> <li><code>src/output/render-manager.cpp</code></li> <li><code>src/output/workspace-impl.cpp</code></li> <li><code>src/output/workspace-impl.cpp</code></li> </ul>"},{"location":"Configuration/#corebackground_color","title":"<code>core.background_color</code>","text":"<p>Sets the background color of workspaces. Visible when nothing is drawing the background. The default is <code>0.1 0.1 0.1 1.0</code>.</p>"},{"location":"Configuration/#coreclose_top_view","title":"<code>core.close_top_view</code>","text":"<p>Closes the currently focused window with the specified key.</p>"},{"location":"Configuration/#coreplugins","title":"<code>core.plugins</code>","text":"<p>Loads the specified plugins, space-separated list.</p>"},{"location":"Configuration/#corepreferred_decoration_mode","title":"<code>core.preferred_decoration_mode</code>","text":"<p>Sets the preferred window decoration mode. Possible values are <code>client</code> and <code>server</code>. <code>client</code> allows the client to draw its own decorations. The default is <code>client</code>.</p>"},{"location":"Configuration/#corevheight","title":"<code>core.vheight</code>","text":"<p>Sets the number of vertical workspaces. Currently, cannot be changed at runtime. The default is 3.</p>"},{"location":"Configuration/#corevwidth","title":"<code>core.vwidth</code>","text":"<p>Sets the number of horizontal workspaces. Currently, cannot be changed at runtime. The default is 3.</p>"},{"location":"Configuration/#corexwayland","title":"<code>core.xwayland</code>","text":"<p>Enables or disables XWayland support, which allows X11 applications to be used. The default is true.</p>"},{"location":"Configuration/#corexwayland_startup_script","title":"<code>core.xwayland_startup_script</code>","text":"<p>Specifies the path to an executable script or binary, which is executed at the end of the XWayland startup process. A suggested example script for HiDPI with a scale factor of 2, and support for importing .Xresources from your home directory:</p> <pre><code>#!/bin/sh\n\nif [ -r \"${HOME}/.Xresources\" ] &amp;&amp; command -v xrdb &gt;/dev/null 2&gt;&amp;1; then\n    xrdb -merge \"${HOME}/.Xresources\"\nfi\n\nxprop -root -f _XWAYLAND_GLOBAL_OUTPUT_SCALE 32c -set _XWAYLAND_GLOBAL_OUTPUT_SCALE 2\n</code></pre>"},{"location":"Configuration/#coremax_render_time","title":"<code>core.max_render_time</code>","text":"<p>Controls a latency optimization. Lower values mean that Wayfire will reserve less time for redrawing an output, which leaves more time for clients to update themselves. Values that are too low however will lead to Wayfire missing a frame and lowering the refresh rate. Set to <code>-1</code> to disable.</p>"},{"location":"Configuration/#corefocus_buttons","title":"<code>core.focus_buttons</code>","text":"<p>A list of buttons which will focus the view currently under the cursor and bring it to the front. Default is <code>BTN_LEFT | BTN_RIGHT | BTN_MIDDLE</code>.</p>"},{"location":"Configuration/#corefocus_button_with_modifiers","title":"<code>core.focus_button_with_modifiers</code>","text":"<p>If set to <code>true</code>, the focus action described by <code>core.focus_buttons</code> will work even when modifiers are pressed. Default is <code>false</code>.</p>"},{"location":"Configuration/#corefocus_buttons_passthrough","title":"<code>core.focus_buttons_passthrough</code>","text":"<p>Whether to send the actual button event to the client under the cursor for clicks handled by <code>core.focus_buttons</code>. Default is <code>true</code>.</p>"},{"location":"Configuration/#input","title":"Input","text":"<p>On a typical setup, the input configuration is managed in the config section <code>[input]</code>.</p> <p>The options in <code>[input]</code> are defined in <code>metadata/input.xml</code>.</p> <p>On some setups, this simple configuration (where keys apply to all input devices) is not expressive enough, and wayfire can be configured using <code>[input:&lt;device_name&gt;]</code> and <code>[input-device:&lt;device_name&gt;]</code> configurations, see Input device-specific options for more info.</p>"},{"location":"Configuration/#keyboard-configuration","title":"Keyboard configuration","text":"<p>Defined in:</p> <ul> <li><code>src/core/seat/keyboard.cpp</code></li> </ul>"},{"location":"Configuration/#inputkb_repeat_delay","title":"<code>input.kb_repeat_delay</code>","text":"<p>Sets the amount of time a key must be held before it starts repeating. The default is 400.</p>"},{"location":"Configuration/#inputkb_repeat_rate","title":"<code>input.kb_repeat_rate</code>","text":"<p>Sets the frequency of key repeats once the <code>input.kb_repeat_delay</code> has passed. The default is 40.</p>"},{"location":"Configuration/#inputmodifier_binding_timeout","title":"<code>input.modifier_binding_timeout</code>","text":"<p>Cancels modifier actions (like Super for the <code>expo</code> plugin) when held for the specified timeout (in milliseconds). Setting the value to 0 never cancels. The default is 400.</p>"},{"location":"Configuration/#inputkb_numlock_default_state","title":"<code>input.kb_numlock_default_state</code>","text":"<p>Default numlock state when Wayfire starts. The default is false.</p>"},{"location":"Configuration/#inputkb_capslock_default_state","title":"<code>input.kb_capslock_default_state</code>","text":"<p>Default capslock state when Wayfire starts. The default is false.</p>"},{"location":"Configuration/#inputxkb_layout","title":"<code>input.xkb_layout</code>","text":"<p>Sets the layout of the keyboard, like <code>us</code> or <code>fr</code>. Multiple layouts can be specified by separating them with commas. The default is <code>us</code>.</p>"},{"location":"Configuration/#inputxkb_model","title":"<code>input.xkb_model</code>","text":"<p>Sets the model of the keyboard. This has an influence for some extra keys your keyboard might have.</p>"},{"location":"Configuration/#inputxkb_options","title":"<code>input.xkb_options</code>","text":"<p>Sets extra XKB configuration options for the keyboard, such as keyboard shortcuts to switch layouts. Multiple options can be specified by separating them with commas.</p>"},{"location":"Configuration/#inputxkb_rules","title":"<code>input.xkb_rules</code>","text":"<p>Sets files of rules to be used for keyboard mapping composition. The default is <code>evdev</code>.</p>"},{"location":"Configuration/#inputxkb_variant","title":"<code>input.xkb_variant</code>","text":"<p>Sets the variant of the keyboard, like <code>dvorak</code> or <code>colemak</code>.</p>"},{"location":"Configuration/#libinput-configuration","title":"libinput configuration","text":"<p>See libinput documentation for details.</p> <p>Defined in:</p> <ul> <li><code>src/core/seat/pointing-device.cpp</code></li> </ul>"},{"location":"Configuration/#inputleft_handed_mode","title":"<code>input.left_handed_mode</code>","text":"<p>Enables or disables left-handed mode. The default is false.</p> <p>See Left-handed Mode for details.</p>"},{"location":"Configuration/#inputmiddle_emulation","title":"<code>input.middle_emulation</code>","text":"<p>Enables or disables middle button emulation. Middle button emulation converts a simultaneous left and right button click into a middle button event. Enabling this option effectively disables the hardware middle button.  The default is false.</p> <p>See Middle Button Emulation for details.</p>"},{"location":"Configuration/#inputmouse_accel_profile","title":"<code>input.mouse_accel_profile</code>","text":"<p>Sets the pointer acceleration profile.</p> <p>Possible values are:</p> <ul> <li><code>default</code></li> <li><code>none</code></li> <li><code>adaptive</code></li> <li><code>flat</code></li> </ul> <p>The default is <code>default</code>.</p> <p>See Pointer acceleration for details.</p>"},{"location":"Configuration/#inputtouchpad_accel_profile","title":"<code>input.touchpad_accel_profile</code>","text":"<p>Sets the touchpad acceleration profile.</p> <p>Possible values are:</p> <ul> <li><code>default</code></li> <li><code>none</code></li> <li><code>adaptive</code></li> <li><code>flat</code></li> </ul> <p>The default is <code>default</code>.</p> <p>See Pointer acceleration for details.</p>"},{"location":"Configuration/#inputtap_to_click","title":"<code>input.tap_to_click</code>","text":"<p>Enables or disables tap-to-click. The default is true.</p> <p>See Tap-to-click behaviour for details.</p>"},{"location":"Configuration/#inputdrag_lock","title":"<code>input.drag_lock</code>","text":"<p>Enables or disables drag lock. The default is false.</p> <p>See Tap-and-drag for details.</p>"},{"location":"Configuration/#inputclick_method","title":"<code>input.click_method</code>","text":"<p>Changes the click method.</p> <p>Possible values are:</p> <ul> <li><code>default</code></li> <li><code>none</code></li> <li><code>button-areas</code></li> <li><code>clickfinger</code></li> </ul> <p>The default is <code>default</code>.</p> <p>See Clickpad software button behavior for details.</p>"},{"location":"Configuration/#inputscroll_method","title":"<code>input.scroll_method</code>","text":"<p>Changes the scroll method.</p> <p>Possible values are:</p> <ul> <li><code>default</code></li> <li><code>none</code></li> <li><code>two-finger</code></li> <li><code>edge</code></li> <li><code>on-button-down</code></li> </ul> <p>The default is <code>default</code>.</p> <p>See Scrolling for details.</p>"},{"location":"Configuration/#inputdisable_touchpad_while_typing","title":"<code>input.disable_touchpad_while_typing</code>","text":"<p>Disables the touchpad while typing. The default is false.</p>"},{"location":"Configuration/#inputdisable_touchpad_while_mouse","title":"<code>input.disable_touchpad_while_mouse</code>","text":"<p>Disables the touchpad while using the mouse. The default is false.</p>"},{"location":"Configuration/#inputnatural_scroll","title":"<code>input.natural_scroll</code>","text":"<p>Enables or disables natural (inverted) scrolling. The default is false.</p>"},{"location":"Configuration/#inputmouse_cursor_speed","title":"<code>input.mouse_cursor_speed</code>","text":"<p>Changes the pointer acceleration. The value must be between -1.0 and 1.00. The default is 0.0.</p>"},{"location":"Configuration/#inputtouchpad_cursor_speed","title":"<code>input.touchpad_cursor_speed</code>","text":"<p>Changes the touchpad acceleration. The value must be between -1.0 and 1.00. The default is 0.0.</p>"},{"location":"Configuration/#inputmouse_scroll_speed","title":"<code>input.mouse_scroll_speed</code>","text":"<p>Changes the mouse scroll factor. Scroll speed will be scaled by the given value, which must be non-negative. The default is 1.0.</p>"},{"location":"Configuration/#inputtouchpad_scroll_speed","title":"<code>input.touchpad_scroll_speed</code>","text":"<p>Changes the touchpad scroll factor. Scroll speed will be scaled by the given value, which must be non-negative. The default is 1.0.</p>"},{"location":"Configuration/#inputtablet_motion_mode","title":"<code>input.tablet_motion_mode</code>","text":"<p>Changes the tablet (example, by Wacom) motion mode.</p> <p>Possible values are:</p> <ul> <li><code>absolute</code></li> <li><code>relative</code></li> </ul> <p>The default is absolute.</p>"},{"location":"Configuration/#cursor-configuration","title":"Cursor configuration","text":"<p>Defined in:</p> <ul> <li><code>src/core/seat/cursor.cpp</code></li> </ul>"},{"location":"Configuration/#inputcursor_theme","title":"<code>input.cursor_theme</code>","text":"<p>Overrides the system default <code>XCursor</code> theme. The default is <code>default</code>.</p>"},{"location":"Configuration/#inputcursor_size","title":"<code>input.cursor_size</code>","text":"<p>Overrides the system default <code>XCursor</code> size. The default is 24.</p>"},{"location":"Configuration/#input-device-specific-options","title":"Input device-specific options","text":"<p>The <code>[input]</code> section contains input configuration options which apply to all devices. If needed, the options can be configured for each device separately by using the <code>[input:&lt;device_name&gt;]</code> sections. These per-device sections support the exact same options as the generic <code>[input]</code> section, but apply only to the specific device.</p> <p>[!IMPORTANT] If a device-specific section exists, it is used exclusively instead of the common section; do not rely on a fallback to the common section for options not specified in the device-specific section, but explicitly set all the options on the given device<code>[input:&lt;device_name&gt;]</code> section.</p> <p>The device name can most easily be found by looking at Wayfire's log. By default, you will see lines <code>handle new input: &lt;device_name&gt;</code>. You can also run Wayfire with <code>-d input-devices</code> to see more information about which config section names can be used for which devices, as the device name can also be a UDEV identifier.</p> <p>The following example configures a keyboard to use German layout (while the other keyboard-like devices would use others); this use case can arise when using a bar-code reader which would only support English layout.</p> <pre><code>[input:platform-i8042-serio-0] # or [input:AT Translated Set 2 keyboard]\nxkb_layout = de\n</code></pre> <p>Last but not least, there are also <code>input-device:&lt;device_name&gt;</code> sections. These include additional options that can be set only per-device.</p> <p><code>[input-device:&lt;device-name&gt;]</code> is defined in <code>metadata/input-device.xml</code>.</p>"},{"location":"Configuration/#input-deviceoutput","title":"<code>input-device.output</code>","text":"<p>You can map a specific input device to a specific output (useful for touchscreens).</p> <pre><code>[input-device:Wacom Pen and multitouch sensor Finger]\noutput = eDP-1\n</code></pre> <p>Replace <code>Wacom Pen and multitouch sensor Finger</code> with the name of your device and <code>eDP-1</code> with the name of the output you want to bind the input device to.</p>"},{"location":"Configuration/#input-devicecalibration","title":"<code>input-device.calibration</code>","text":"<p>Can be used to set a 2x3 calibration matrix for touchscreen devices.</p>"},{"location":"Configuration/#output","title":"Output","text":"<p>Output configuration.</p> <p>Note: You can get the names of your outputs with wlr-randr, or look at the output of Wayfire (<code>new output: &lt;name&gt;</code>)</p> <p>Example:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[output:eDP-1]\nmode = 1920x1080@60000\nposition = 0,0\ntransform = normal\nscale = 1.000000\n</code></pre>"},{"location":"Configuration/#outputposition","title":"<code>&lt;output&gt;.position</code>","text":"<p>Places the specified output at the specific position in the global coordinate space. The format is <code>&lt;x&gt;,&lt;y&gt;</code> in pixels.</p>"},{"location":"Configuration/#outputmode","title":"<code>&lt;output&gt;.mode</code>","text":"<p>Configures the specified output to use the given mode. Modes are a combination of width and height (in pixels) and a refresh rate (in hertz) that your display can be configured to use. The format is <code>&lt;width&gt;x&lt;height&gt;@&lt;rate&gt;</code>, or <code>off</code>, which turns the output off.</p> <p>Mode can also be <code>mirror &lt;output_name&gt;</code>, where <code>&lt;output_name&gt;</code> is the name of another output. In this case, the output will simply mirror the contents of the given output.</p>"},{"location":"Configuration/#outputcustom_mode_n","title":"<code>&lt;output&gt;.custom_mode_N</code>","text":"<p>Can be used to create a new mode for the output, even if the hardware does not report it. Valid values are modelines, can be generated with cvt. For example, if you want to add a <code>1280x720</code> mode:</p> <p>Output of <code>cvt 1280 720</code>: <pre><code># 1280x720 59.86 Hz (CVT 0.92M9) hsync: 44.77 kHz; pclk: 74.50 MHz\nModeline \"1280x720_60.00\"   74.50  1280 1344 1472 1664  720 723 728 748 -hsync +vsync\n</code></pre></p> <p>Option value in config file: <pre><code>custom_mode_1 = 74.50  1280 1344 1472 1664  720 723 728 748 -hsync +vsync\n</code></pre></p> <p>Optionally append \"interlaced\" at the end of the modeline to enable interlaced scan.</p> <p>After that, you can use the new mode in the <code>&lt;output&gt;.mode</code> option or via kanshi.</p>"},{"location":"Configuration/#outputscale","title":"<code>&lt;output&gt;.scale</code>","text":"<p>Scales the specified output by the specified scale factor.</p>"},{"location":"Configuration/#outputtransform","title":"<code>&lt;output&gt;.transform</code>","text":"<p>Sets the background transform for the specified output. Possible values are any members of the <code>wl_output::transform</code> enum, viewable here.</p>"},{"location":"Configuration/#workarounds","title":"Workarounds","text":"<p>Some hacks that might be required to make things work.</p> <p>Defined in:</p> <ul> <li><code>metadata/workarounds.xml</code></li> </ul>"},{"location":"Configuration/#workaroundsapp_id_mode","title":"<code>workarounds.app_id_mode</code>","text":"<p>Application ID mode.</p> <p>Specifies the application ID mode.</p> <p>Possible values are:</p> <ul> <li><code>stock</code></li> <li><code>gtk-shell</code></li> <li><code>full</code></li> </ul> <p>The default is <code>stock</code>.</p>"},{"location":"Configuration/#workaroundsall_dialogs_modal","title":"<code>workarounds.all_dialogs_modal</code>","text":"<p>Make all dialogs modal.</p> <p>If false, the main window can be focused even if it has a dialog. The dialog is nevertheless kept on top of the main window. Kwin defaults to false.</p> <p>The default is <code>true</code>.</p>"},{"location":"Configuration/#workaroundsdynamic_repaint_delay","title":"<code>workarounds.dynamic_repaint_delay</code>","text":"<p>Allow dynamic repaint delay.</p> <p>If true, allows Wayfire to dynamically recalculate its max_render_time, i.e allow render time higher than max_render_time.</p> <p>The default is <code>true</code>.</p>"},{"location":"Configuration/#workaroundsuse_external_output_configuration","title":"<code>workarounds.use_external_output_configuration</code>","text":"<p>Use external output configuration instead of Wayfire's own.</p> <p>If true, Wayfire will not handle any configuration options for outputs in the config file once an external daemon like kansi sets the output configuration via the wlr-output-management protocol. Exceptions are made for options not available via wlr-output-management, like output mirroring and custom modelines.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsremove_output_limits","title":"<code>workarounds.remove_output_limits</code>","text":"<p>Allow views to overlap between multiple outputs. Many of the core plugins will not behave properly with this option set!</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsforce_preferred_decoration_mode","title":"<code>workarounds.force_preferred_decoration_mode</code>","text":"<p>Force xdg-decoration clients to use the compositor-preferred decoration mode regardless of the client's preference.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsenable_so_unloading","title":"<code>workarounds.enable_so_unloading</code>","text":"<p>Enable calling dlclose() when a plugin is unloaded. Note that this may not work well with all plugins.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsdiscard_command_output","title":"<code>workarounds.discard_command_output</code>","text":"<p>Discard output from commands invoked by Wayfire, so that they don't end up in the logs.</p> <p>The default is <code>true</code>.</p>"},{"location":"Configuration/#workaroundsenable_input_method_v2","title":"<code>workarounds.enable_input_method_v2</code>","text":"<p>Enable support for the newer input-method-v2 protocol. Note that the input-method-v1 protocol works better in many cases.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsenable_opaque_region_damage_optimizations","title":"<code>workarounds.enable_opaque_region_damage_optimizations</code>","text":"<p>Enable certain damage optimizations which are based on a surfaces' opaque regions. In some cases, this optimization might give unexpected results (i.e background app stops updating) even though this is fine according to Wayland's protocol.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#workaroundsforce_frame_sync","title":"<code>workarounds.force_frame_sync</code>","text":"<p>This option can be used to workaround driver bugs that cause rendering artifacts, though can cause more resource usage. Leave disabled if unsure.</p> <p>The default is <code>false</code>.</p>"},{"location":"Configuration/#utility","title":"Utility","text":""},{"location":"Configuration/#session-lock-protocol","title":"Session lock protocol","text":"<p>An implementation of the ext-session-lock-v1 protocol. Provides more secure screen locking.</p> <p>Defined in:</p> <ul> <li><code>metadata/session-lock.xml</code></li> <li><code>plugins/protocols/session-lock.cpp</code></li> </ul>"},{"location":"Configuration/#xdg-activation-protocol","title":"XDG Activation protocol","text":"<p>An implementation of the XDG Activation protocol. This allows already open views to be \"activated\" (focused) in response to some user action, e.g. a text editor might use this to request focus when you open a document from a file manager. Enable this by adding <code>xdg-activation</code> to <code>core.plugins</code>.</p> <p>Note: newly opened views are currently always focused by Wayfire; this protocol is only concerned with allowing to focus already open views.</p> <p>Defined in:</p> <ul> <li><code>metadata/xdg-activation.xml</code></li> <li><code>plugins/protocols/xdg-activation.cpp</code></li> </ul> <p>By default, activation requests are granted for most cases, including for \"self-generated\" activation tokens. This could in theory allow apps to \"steal\" focus in unexpected ways. The following options make the handling of activation requests more strict:</p>"},{"location":"Configuration/#xdg-activationcheck_surface","title":"<code>xdg-activation.check_surface</code>","text":"<p>If set to true, an activation request must come from the currently focused view and in response to some user interaction. This restricts activation requests for the case when the currently focused view explicitly \"passes\" focus to a newly activated one (e.g. opening a file from a file manager). If set to false, any app can use this protocol to request focus, even without user interaction. Note that this is currently required for focusing an already open view from the command line (e.g. opening a file from the terminal in a text editor that has an aleady open view).</p>"},{"location":"Configuration/#xdg-activationonly_last_request","title":"<code>xdg-activation.only_last_request</code>","text":"<p>If set to true, a view can only be activated using the last generated activation token (in response to the latest user interaction). This is to avoid race conditions when multiple tokens are generated in a short time in response to multiple user actions.</p>"},{"location":"Configuration/#xdg-activationtimeout","title":"<code>xdg-activation.timeout</code>","text":"<p>Timeout (in seconds) for activation requests to expire. Default is 30s.</p>"},{"location":"Configuration/#input-method-protocols","title":"Input Method Protocols","text":"<p>Implementations of the Input method v2 protocol and the Text input protocol. This allows fcitx5 to work properly with Chromium without XWayland, GTK IM Module and QT IM Module. </p> <p>Note: Configure <code>~/.config/chromium-flags.conf</code> if you are using Chromium:  <pre><code>$ vim ~/.config/chromium-flags.conf\n--enable-wayland-ime --wayland-text-input-version=3\n</code></pre></p> <p>Defined in: - <code>metadata/input-method-v1.xml</code> - <code>plugins/protocols/input-method-v1.cpp</code> - <code>plugins/protocols/text-input-v1-v3.hpp</code></p>"},{"location":"Configuration/#window-management","title":"Window management","text":""},{"location":"Configuration/#fast-switcher","title":"Fast switcher","text":"<p>A plugin to switch active window.</p> <p>Defined in:</p> <ul> <li><code>metadata/fast-switcher.xml</code></li> <li><code>plugins/single_plugins/fast-switcher.cpp</code></li> </ul>"},{"location":"Configuration/#fast-switcheractivate","title":"<code>fast-switcher.activate</code>","text":"<p>Activates fast switcher, switching between windows in forward order, using the specified key.</p>"},{"location":"Configuration/#fast-switcheractivate_backward","title":"<code>fast-switcher.activate_backward</code>","text":"<p>Activates fast switcher, switching between windows in reverse order, using the specified key.</p>"},{"location":"Configuration/#grid","title":"Grid","text":"<p>A plugin to position the windows in certain regions of the output.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/grid.xml</code></li> <li><code>plugins/single_plugins/grid.cpp</code></li> </ul>"},{"location":"Configuration/#gridduration","title":"<code>grid.duration</code>","text":"<p>Sets the duration of the animation in milliseconds. The default is 300.</p>"},{"location":"Configuration/#gridrestore","title":"<code>grid.restore</code>","text":"<p>Restores the window to its original size and position with the specified activator.</p>"},{"location":"Configuration/#gridslot_b","title":"<code>grid.slot_b</code>","text":"<p>Positions the window in the bottom edge of the screen with the specified activator. The window takes half of the screen.</p>"},{"location":"Configuration/#gridslot_bl","title":"<code>grid.slot_bl</code>","text":"<p>Positions the window in the bottom left corner of the screen with the specified activator. The window takes 1/4 of the screen.</p>"},{"location":"Configuration/#gridslot_br","title":"<code>grid.slot_br</code>","text":"<p>Positions the window in the bottom right corner of the screen with the specified activator. The window takes 1/4 of the screen.</p>"},{"location":"Configuration/#gridslot_c","title":"<code>grid.slot_c</code>","text":"<p>Positions the window in the center of the screen with the specified activator. The window is maximized.</p>"},{"location":"Configuration/#gridslot_l","title":"<code>grid.slot_l</code>","text":"<p>Positions the window in the left edge of the screen with the specified activator. The window takes half of the screen.</p>"},{"location":"Configuration/#gridslot_r","title":"<code>grid.slot_r</code>","text":"<p>Positions the window in the right edge of the screen with the specified activator. The window takes half of the screen.</p>"},{"location":"Configuration/#gridslot_t","title":"<code>grid.slot_t</code>","text":"<p>Positions the window in the top edge of the screen with the specified activator. The window takes half of the screen.</p>"},{"location":"Configuration/#gridslot_tl","title":"<code>grid.slot_tl</code>","text":"<p>Positions the window in the top left corner of the screen with the specified activator. The window takes 1/4 of the screen.</p>"},{"location":"Configuration/#gridslot_tr","title":"<code>grid.slot_tr</code>","text":"<p>Positions the window in the top right corner of the screen with the specified activator. The window takes 1/4 of the screen.</p>"},{"location":"Configuration/#gridtype","title":"<code>grid.type</code>","text":"<p>Sets the type of the animation.</p> <p>Possible values are:</p> <ul> <li><code>none</code></li> <li><code>crossfade</code></li> <li><code>wobbly</code></li> </ul> <p>The default is <code>crossfade</code>.</p>"},{"location":"Configuration/#move","title":"Move","text":"<p>A plugin to move windows around by dragging them from any part (not just the title bar).</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/move.xml</code></li> <li><code>plugins/single_plugins/move.cpp</code></li> <li><code>plugins/single_plugins/move-snap-helper.hpp</code></li> </ul>"},{"location":"Configuration/#moveactivate","title":"<code>move.activate</code>","text":"<p>When the specified button is held down, you can drag windows to move them.</p>"},{"location":"Configuration/#moveenable_snap","title":"<code>move.enable_snap</code>","text":"<p>Enables or disables snapping the window being moved to an edge of the screen. The default is true. Requires the <code>grid</code> plugin to also be enabled.</p>"},{"location":"Configuration/#moveenable_snap_off","title":"<code>move.enable_snap_off</code>","text":"<p>Enables or disables snapping off the window being grabbed from an edge of the screen. The default is true.</p>"},{"location":"Configuration/#movejoin_views","title":"<code>move.join_views</code>","text":"<p>Disallows independently moving dialogues. The default is false.</p>"},{"location":"Configuration/#movesnap_off_threshold","title":"<code>move.snap_off_threshold</code>","text":"<p>When attempting to move a snapped window, this option requires the user to move at least the specified amount of pixels before the window actually moves. This only takes effect with <code>move.enable_snap_off</code>. The default is 10.</p>"},{"location":"Configuration/#movesnap_threshold","title":"<code>move.snap_threshold</code>","text":"<p>Sets the amount of pixels from the edge of the screen for which aero-snap gets triggered. The default is 10.</p>"},{"location":"Configuration/#place","title":"Place","text":"<p>A plugin to position newly opened windows.</p> <p>Defined in:</p> <ul> <li><code>metadata/place.xml</code></li> <li><code>plugins/single_plugins/place.cpp</code></li> </ul>"},{"location":"Configuration/#placemode","title":"<code>place.mode</code>","text":"<p>Specifies how to position newly opened windows.</p> <p>Possible values are:</p> <ul> <li><code>center</code></li> <li><code>cascade</code></li> <li><code>random</code></li> </ul> <p>The default is <code>center</code>.</p>"},{"location":"Configuration/#preserve-output","title":"Preserve output","text":"<p>Some monitors and/or GPUs disconnect the outputs during DPMS, which can result in all of your windows ending up on one output after waking them from sleep. This plugin prevents that from happening.</p>"},{"location":"Configuration/#preserve-outputlast_output_focus_timeout","title":"<code>preserve-output.last_output_focus_timeout</code>","text":"<p>When an output is destroyed, if it is focused then it is remembered as the focused output, unless another output was already remembered as the focused output in the last X milliseconds. This option sets that number of milliseconds.</p> <p>The default is 10000 (10 seconds).</p>"},{"location":"Configuration/#simple-tile","title":"Simple tile","text":"<p>A plugin which provides some tiling features, inspired by Sway. The plugin is meant to contain only the basics.</p> <p>Defined in:</p> <ul> <li><code>metadata/simple-tile.xml</code></li> <li><code>plugins/tile/tile-plugin.cpp</code></li> </ul>"},{"location":"Configuration/#simple-tilebutton_move","title":"<code>simple-tile.button_move</code>","text":"<p>When the specified button is held down, you can drag and drop tiled windows to reorder them and to change the tiling direction.</p>"},{"location":"Configuration/#simple-tilebutton_resize","title":"<code>simple-tile.button_resize</code>","text":"<p>When the specified button is held down, you can drag tiled windows to resize them.</p>"},{"location":"Configuration/#simple-tilekeep_fullscreen_on_adjacent","title":"<code>simple-tile.keep_fullscreen_on_adjacent</code>","text":"<p>Specifies whether to keep fullscreen state when changing the focus. If true, the next focused window will also get fullscreen. If false, leaves fullscreen. The default is true.</p>"},{"location":"Configuration/#simple-tilekey_focus_above","title":"<code>simple-tile.key_focus_above</code>","text":"<p>Moves focus to the window above with the specified key.</p>"},{"location":"Configuration/#simple-tilekey_focus_below","title":"<code>simple-tile.key_focus_below</code>","text":"<p>Moves focus to the window below with the specified key.</p>"},{"location":"Configuration/#simple-tilekey_focus_left","title":"<code>simple-tile.key_focus_left</code>","text":"<p>Moves focus to the window left with the specified key.</p>"},{"location":"Configuration/#simple-tilekey_focus_right","title":"<code>simple-tile.key_focus_right</code>","text":"<p>Moves focus to the window right with the specified key.</p>"},{"location":"Configuration/#simple-tilekey_toggle","title":"<code>simple-tile.key_toggle</code>","text":"<p>Toggles tiling mode with the specified key.</p>"},{"location":"Configuration/#simple-tiletile_by_default","title":"<code>simple-tile.tile_by_default</code>","text":"<p>Enables tiling for windows matching the specified criteria. The default is <code>all</code>.</p> <p>See [<code>criteria</code>] for details.</p> <p>Example: Excluding a Specific Window from Tiling To exclude a window from tiling based on its title, you can use the following syntax:</p> <pre><code>[simple-tile]\ntile_by_default = !(title is \"ExactWindowTitle\")\n</code></pre> <p>or, to exclude any window whose title contains a specific phrase:</p> <pre><code>[simple-tile]\ntile_by_default = !(title contains \"PartialTitle\")\n</code></pre> <p>For example, if you want to prevent tiling for any window with the title \"Floating Notes\", you would use: <pre><code>[simple-tile]\ntile_by_default = !(title is \"Floating Notes\")\n</code></pre></p> <p>This will ensure that any window with the exact title \"Floating Notes\" remains floating while all others are tiled.</p>"},{"location":"Configuration/#simple-tileinner_gap_size","title":"<code>simple-tile.inner_gap_size</code>","text":"<p>Controls the gap size (free space) between adjacent tiled views. Default is 5 pixels.</p>"},{"location":"Configuration/#simple-tileouter_horiz_gap_size","title":"<code>simple-tile.outer_horiz_gap_size</code>","text":"<p>Controls the gap size on the left and the right edge of the workspace. Default is 0 pixels.</p>"},{"location":"Configuration/#simple-tileouter_vert_gap_size","title":"<code>simple-tile.outer_vert_gap_size</code>","text":"<p>Controls the gap size on the top and the bottom edge of the workspace. Default is 0 pixels.</p>"},{"location":"Configuration/#switcher","title":"Switcher","text":"<p>A plugin to change active window with an animation.</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/switcher.xml</code></li> <li><code>plugins/single_plugins/switcher.cpp</code></li> <li><code>wf-config/src/types.cpp</code></li> </ul>"},{"location":"Configuration/#switchergesture_toggle","title":"<code>switcher.gesture_toggle</code>","text":"<p>Toggles the switcher with the specified gesture. The default is <code>edge-swipe down 3</code>.</p>"},{"location":"Configuration/#switchernext_view","title":"<code>switcher.next_view</code>","text":"<p>Switches to the next view with the specified key.</p>"},{"location":"Configuration/#switcherprev_view","title":"<code>switcher.prev_view</code>","text":"<p>Switches to the previous view with the specified key.</p>"},{"location":"Configuration/#switcherspeed","title":"<code>switcher.speed</code>","text":"<p>Sets the duration of the animation in milliseconds. The default is 500.</p>"},{"location":"Configuration/#switchertouch_sensitivity","title":"<code>switcher.touch_sensitivity</code>","text":"<p>Sets the touch sensitivity. The default is 1.0.</p>"},{"location":"Configuration/#switcherview_thumbnail_scale","title":"<code>switcher.view_thumbnail_scale</code>","text":"<p>Sets the thumbnail size. The default is 1.0.</p>"},{"location":"Configuration/#resize","title":"Resize","text":"<p>A plugin to resize windows by dragging them from any part (not just the edges).</p> <p></p> <p>Defined in:</p> <ul> <li><code>metadata/resize.xml</code></li> <li><code>plugins/single_plugins/resize.cpp</code></li> </ul>"},{"location":"Configuration/#resizeactivate","title":"<code>resize.activate</code>","text":"<p>When the specified button is held down, you can drag windows to resize them.</p>"},{"location":"Configuration/#wm-actions","title":"WM-Actions","text":"<p>A plugin providing various window management functions. - <code>metadata/wm-actions.xml</code> - <code>plugins/wm-actions.cpp</code></p>"},{"location":"Configuration/#wm-actionstoggle_fullscreen","title":"<code>wm-actions.toggle_fullscreen</code>","text":"<p>Makes focused view fullscreen with the specified key.</p>"},{"location":"Configuration/#wm-actionstoggle_always_on_top","title":"<code>wm-actions.toggle_always_on_top</code>","text":"<p>Toggles the always-on-top state of the focused view (as a keybinding) or the view clicked on (as a button binding).</p>"},{"location":"Configuration/#wm-actionstoggle_sticky","title":"<code>wm-actions.toggle_sticky</code>","text":"<p>Toggle the sticky state of a view.</p>"},{"location":"Configuration/#wm-actionstoggle_maximize","title":"<code>wm-actions.toggle_maximize</code>","text":"<p>Toggle the maximize state of the active view.</p>"},{"location":"Configuration/#wm-actionsminimize","title":"<code>wm-actions.minimize</code>","text":"<p>Minimize the active view.</p>"},{"location":"Configuration/#wm-actionstoggle_showdesktop","title":"<code>wm-actions.toggle_showdesktop</code>","text":"<p>Show the desktop.</p>"},{"location":"Configuration/#wm-actionssend_to_back","title":"<code>wm-actions.send_to_back</code>","text":"<p>Send the active view to behind all other views.</p>"},{"location":"Contributing/","title":"Style guide","text":"<p>In general, you should use <code>uncrustify</code> with the <code>uncrustify.ini</code> file from the repo. There are also automatic checks for your PR.</p> <p>To run <code>uncrustify</code> on all project files: <pre><code>$ git ls-files | grep \"hpp$\\|cpp$\" | xargs uncrustify -c uncrustify.ini --no-backup\n</code></pre></p>"},{"location":"Contributing/#names","title":"Names","text":"<p>Class, method and variable names are all in <code>snake_case</code>. Class names should end in <code>_t</code>.</p> <p>File names are all lowercase, with <code>-</code> as word separator. Headers end in <code>.hpp</code>. So, a header could be called <code>this-is-example-header.hpp</code>.</p>"},{"location":"Contributing/#headers","title":"Headers","text":"<ol> <li>Use #pragma once instead of <code>#ifdef</code>.</li> </ol>"},{"location":"Contributing/#environment-variables","title":"Environment variables","text":"<ul> <li>WAYFIRE_PLUGIN_XML_PATH: Wayfire will search this path for plugin XML files. Useful if you're developing custom plugins.</li> <li>WAYFIRE_PLUGIN_PATH: Wayfire will search this path for plugin shared object files. Useful if you're developing custom plugins.</li> </ul>"},{"location":"Contributing/#wayfire-tests","title":"Wayfire Tests","text":"<p>The <code>wayfire-tests</code> are a suite of tests for wayfire.</p> <p>Wayfire pull requests accompanied by a wayfire test pull request to demonstrate a bug fix will be prioritized.</p>"},{"location":"Debugging-problems/","title":"How to create a good bug report","text":"<p>First identify which component causes the bug. It can be: 1. A plugin - if the problem happens while using a plugin or it doesn't happen when a plugin is disabled 2. Wayfire core - when the bug is not related to a plugin 2. Wlroots - Doesn't happen very often, but if the bug is connected to some application that is misbehaving in wayfire, you can also try to see if this app works in Sway or Rootston (the example wlroots compositor). If the bug is present there, too, then please tell so in the issue.</p> <p>Another thing to bear in mind: If you have tried wayfire awhile ago (before August 2018 actually) you are very likely to have an outdated config file. If this is the case, update it using the new example. Otherwise many of the options may not work or some old plugin might crash the compositor.</p> <p>Important: If the bug is actually a crash, you will get a backtrace in the log (stdout). Send it when reporting the bug. If you can reproduce the bug, it would be even better to compile with ASAN, as it will give a much better stacktrace:</p> <pre><code>meson debugbuild --prefix=/usr --buildtype=debug -Db_sanitize=address,undefined\nninja -C debugbuild &amp;&amp; sudo ninja -C debugbuild install\n\nwayfire &amp;&gt; log.txt\n</code></pre> <p>The last command will create a file <code>log.txt</code> in the current directory, containing the debug logs and the backtrace.</p>"},{"location":"Debugging-problems/#debugging-tricks-for-developers","title":"Debugging tricks for developers","text":"<p>If you are working on Wayfire's core or plugins (or are an advanced user trying to figure out the root cause of a problem), Wayfire provides a few utilities for debugging:</p> <ol> <li> <p>Extended debugging flags for different categories of events. The full list of categories can be found in <code>main.cpp</code>, and each of them can be enabled by using <code>-d &lt;category&gt;</code> on the command line when starting Wayfire. Keep in mind that enabling some of these categories will result in lots of output in the log, which is why they are disabled by default. Some categories are:</p> <ul> <li><code>txn</code>, <code>txni</code>, <code>views</code>: related to view state and transactions</li> <li><code>xwayland</code>, <code>wlroots</code>, <code>layer-shell</code></li> <li><code>pointer</code>, <code>kbd</code></li> <li><code>wset</code></li> </ul> </li> <li> <p>When debugging visual problems, sometimes it is useful to try damaging the full screen on every frame (use <code>-R</code>). Also, you can try using <code>-D</code> which paints all non-damaged regions in yellow, thus allowing the user to figure out which parts of the screen are being repainted each frame.</p> </li> <li> <p>Wayfire provides an API for printing out the current stacktrace (<code>wf::print_trace(bool)</code>). The boolean argument indicates whether the fast (true) or the slow (false) mode should be used. The slow mode uses <code>addr2line</code> and is generally a really slow method, but will result in better output which contains file names and precise line numbers.</p> </li> <li> <p>If you are debugging anything scenegraph related, you can use <code>wf::dump_scene()</code> to print Wayfire's current scenegraph to the log. Also, you can try using some of my personal plugins, especially <code>ammen99-debugging</code> and the script <code>wdbg.py</code> - the <code>ipc</code> plugin is required for these. It can be used from a terminal with <code>wdbg.py dump-scenegraph</code>, which will print a colorful description of the scenegraph in the terminal.</p> </li> </ol>"},{"location":"FAQ/","title":"FAQ","text":"<p>Here is a non-extensive list of some common issues which arise when using Wayfire.</p> <p>Table of contents * 1. Wayfire shows just a black screen with a cursor visible * 2. The mouse cursor is invisible * 3. Compilation error X * 4. Monitor displays garbage/ is flickering/ is black * 5. A plugin is enabled but does nothing</p>"},{"location":"FAQ/#1-wayfire-shows-just-a-black-screen-with-a-cursor-visible","title":"1. Wayfire shows just a black screen with a cursor visible","text":"<p>Wayfire itself is just a \"bare-bones\" compositor, similar to Mutter. If you want a background and a panel, you should also install or update wf-shell. In case you install to non-standard prefix and you do not use <code>wf-install</code>, don't forget to set the appropriate environment variables(for example, <code>LD_LIBRARY_PATH</code> so that the panel/background can find <code>wf-config</code>, and <code>PATH</code>).</p>"},{"location":"FAQ/#2-the-mouse-cursor-is-invisible","title":"2. The mouse cursor is invisible","text":"<p>This is a known problem for ex. with the nouveau driver. As a workaround, set the <code>WLR_NO_HARDWARE_CURSORS=1</code> environmental variable before starting Wayfire.</p>"},{"location":"FAQ/#3-compilation-error-x","title":"3. Compilation error X","text":"<p>Wayfire depends on <code>wlroots</code>, which sometimes has breaking changes. To find a compatible version of wlroots:</p> <ol> <li>Wayfire releases usually mention which wlroots release(!) they are compatible with.</li> <li>Wayfire master branch usually compiles with wlroots master branch.</li> <li>When in doubt, look at the <code>subprojects/</code> folder. The wlroots submodule listed there always points towards a wlroots commit which is compatible with the checked out Wayfire version.</li> </ol>"},{"location":"FAQ/#4-monitor-displays-garbage-is-flickering-is-black","title":"4. Monitor displays garbage/ is flickering/ is black","text":"<p>Try setting the evironment variable <code>WLR_DRM_NO_MODIFIERS=1</code> before launching wayfire. See #1397.</p>"},{"location":"FAQ/#5-a-plugin-is-enabled-but-does-nothing","title":"5. A plugin is enabled but does nothing","text":"<p>Plugins that cause an error (throw an exception) when Wayfire attempts to load them will be discarded. Despite this, they will still show up as \"enabled\" in WCM (as WCM only looks at the configuration file). You can verify if this happened by looking at Wayfire's logs -- look for any error message that says <code>[src/core/plugin-loader.cpp:167] Failed to load plugin</code> (logs are usually appended to the system logs when running a graphical session or displayed in the terminal if running Wayfire from the command line). The most likely cause is trying to run a newly installed or updated plugin without restarting Wayfire (in most cases this is required), or an actual bug in the plugin. Simply try restarting Wayfire and try again.</p>"},{"location":"General/","title":"General information","text":""},{"location":"General/#name","title":"Name","text":"<p><code>wayfire</code> \u2013 A 3D Wayland compositor, inspired by Compiz and based on wlroots.</p>"},{"location":"General/#synopsis","title":"Synopsis","text":"<pre><code>wayfire [options\u2026]\n</code></pre>"},{"location":"General/#options","title":"Options","text":"<pre><code>-c &lt;config&gt;\n  Specifies a config file.\n</code></pre>"},{"location":"General/#description","title":"Description","text":"<p>Wayfire is a 3D Wayland compositor, inspired by Compiz and based on wlroots.</p> <p>It aims to create a customizable, extendable and lightweight environment without sacrificing its appearance.</p> <p>You can run <code>wayfire</code> directly from a TTY, or via a Wayland-compatible login manager.</p>"},{"location":"General/#configuration","title":"Configuration","text":"<p><code>wayfire</code> searches for a config file in the following locations, in this order:</p> <ol> <li><code>$XDG_CONFIG_HOME/wayfire.ini</code></li> <li><code>~/.config/wayfire.ini</code></li> </ol> <p>An example configuration can be found [here][<code>wayfire.ini</code>]. You are encouraged to copy this to <code>~/.config/wayfire.ini</code> and edit it from there.</p> <p>For information on the config file format, see Configuration.</p>"},{"location":"IPC-for-developers/","title":"IPC for developers","text":"<p>This document outlines how the IPC is implemented in Wayfire and aims to help people who want to either develop custom IPC methods in plugins or want to create client IPC bindings.</p>"},{"location":"IPC-for-developers/#wire-format","title":"Wire format","text":"<p>Wayfire uses (by default) a unix socket for communication with clients. The location of the socket is exported in the <code>WAYFIRE_SOCKET</code> environment variable. Messages in both direction follow a very simple wire format: 4 bytes encoding the length (little-endian) of the actual message (excluding the 4-bytes header), followed by the actual message.</p> <p>Messages are always serialized json objects.</p>"},{"location":"IPC-for-developers/#message-structure","title":"Message structure","text":""},{"location":"IPC-for-developers/#client-compositor","title":"Client -&gt; Compositor","text":"<p>All messages going from clients to Wayfire are method calls. As such, they must have the following structure:</p> <pre><code>{\n\"method\": \"&lt;method name&gt;\",\n\"data\": {\n &lt;whatever data is needed for the particular method&gt;\n}\n}\n</code></pre> <p>A particular example with the <code>wm-actions/set-always-on-top</code> method:</p> <pre><code>{\n\"method\": \"wm-actions/set-always-on-top\",\n\"data\": {\n \"view-id\": 15,\n \"state\": true,\n}\n}\n</code></pre>"},{"location":"IPC-for-developers/#compositor-client","title":"Compositor -&gt; Client","text":"<p>Messages send from the compositor to the client are less structured:</p> <ul> <li>When the compositor sends a message as a response to client's last method call (it always sends a response for each method call), then the json object has no constraints on its structure. However, very often Wayfire will return something containing either <code>{\"result\": \"ok\"}</code> or <code>{\"error\": \"&lt;description of the error&gt;\"}</code>.</li> <li>When the compositor sends a notification to clients which have subscribed for events, then they will get a message containing <code>{\"event\": \"&lt;event type&gt;\"}</code>.</li> </ul> <p>For a complete view of what methods do and what they return, always take a look at the source code :)</p>"},{"location":"IPC-for-developers/#ipc-in-the-compositor","title":"IPC in the compositor","text":"<p>Wayfire's IPC mechanism is made so that it is nearly independent from the actual socket implementation. There are three main objects:</p> <ul> <li>The IPC socket itself, provided by the <code>ipc</code> plugin. This plugin realizes the aforementioned wire format and dispatches calls to the method repository.</li> <li>The IPC method repository. Every plugin that wishes to provide IPC methods registers its methods in this method repository. A method in this context is seen as a function which takes the json data (the <code>\"data\": {}</code> subobject from the wire format section) and generates a response for the client.</li> <li>IPC clients (objects which implement this interface): they represent a connected client. Used so that the IPC methods can identify clients and send them notifications.</li> </ul> <p>With this division, it is possible to provide these IPC methods also over DBus, or any other IPC variant, as long as the json data can be transported to the client. All plugins providing actual functionalities work only with the method repository, which is independent of the actual IPC realization.</p>"},{"location":"Localisation/","title":"Localisation","text":"<p>Since the cycle of v0.11.0, the WCM is localised using gettext and can display localised metadata info for the plugins which provide suitable gettext catalogues. Translation catalogues are installed in <code>&lt;PREFIX&gt;/locale</code> and the WCM looks for a catalogue/domain named <code>wf-plugin-PLUGINNAME</code> for each plugin, which will provide translations for the option names, description and enum value names in the XML file; these can be extracted to a pot file with itstool using the Wayfire ITS schema:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;its:rules xmlns:its=\"http://www.w3.org/2005/11/its\"\n           version=\"2.0\"&gt;\n    &lt;its:translateRule translate=\"no\" selector=\"//*\"/&gt;\n    &lt;its:translateRule translate=\"yes\" selector=\"//_short\"/&gt;\n    &lt;its:translateRule translate=\"yes\" selector=\"//_long\"/&gt;\n    &lt;its:translateRule translate=\"yes\" selector=\"//_name\"/&gt;\n&lt;/its:rules&gt;\n</code></pre> <p>Example command:</p> <pre><code>itstool --its=SCHEMA-FILE.xml METADATA-FILE.xml -o OUTPUT.pot\n</code></pre>"},{"location":"Localisation/#translators-workflow","title":"Translator's workflow","text":"<ol> <li>Create a new directory for the translation in the root of the source directory <code>locale/&lt;LANGUAGE&gt;/LC_MESSAGES/</code>. This will be the location of the .po file.</li> <li>Extract your pot file as mentioned above.</li> <li>Copy the .pot file as <code>wf-plugin-PLUGINNAME.po</code> in the newly created directory.</li> <li>Edit the .po file to add the translated message strings.</li> <li> <p>Remove path comments (<code>#:</code> lines) from the po files:</p> <pre><code>msgcat --no-location POFILE -o POFILE\n</code></pre> <p>You can also use the script included in the Wayfire repository.</p> </li> <li> <p>Remove the meson build directory and reinstall to test.</p> </li> </ol> <p>NOTE: Meson uses debug build type by default, which effectively disables translation installation for Wayfire. You may pass <code>-Dbuild_locales=enabled</code> as a meson option or set the build type <code>-Dbuildtype=release</code> to enable translation generation and installation. This does not apply to other repositories with translation support; they build locales unconditionally when configuring with meson.</p> <ol> <li>Finally, add and commit <code>locale/&lt;LANGUAGE&gt;</code> directory with git.</li> </ol> <p>To merge a pot with a po:</p> <pre><code>msgmerge -o YOUR_PO.po YOUR_PO.po YOUR_POT.pot\n</code></pre> <p>It is mandatory to make a fresh POT and merge it into your PO whenever you update translations. Otherwise the messages you translate won't be up to date and you might end up with missing new messages or translating ones that are no longer used.</p> <p>Note to use the correct format as the basename of the catalogue files, so <code>pixdecor</code> has, for instance, <code>pixdecor/locale/ro_RO/LC_MESSAGES/wf-plugin-pixdecor.po</code>, which gets compiled to <code>&lt;PREFIX&gt;/locale/ro_RO/LC_MESSAGES/wf-plugin-pixdecor.mo</code>.</p> <p>Don't generate a mo because they will be made at build time and also don't commit the pot. You can use the usual gettext commands or a graphical editor such as Poedit which will greatly simplify navigating the po files.</p> <p>To translate wcm, do a similar process but use xgettext normally, extracting from all cpp and hpp files in the source directory.</p> <p>Command to extract a pot from WCM's own UI:</p> <pre><code>xgettext --language=C++ --verbose -k_ -o /tmp/wcm.pot src/*.cpp src/*.hpp\n</code></pre> <p>For repositories of many plugins, the Wayfire repository provides an example python script (<code>util/make_pots.py</code>) that can be used to extract each XML file to a POT and then you can use them normally, but remember not to commit them.</p>"},{"location":"Localisation/#for-plugin-authors","title":"For plugin authors","text":"<p>The xml metadata files remain in English and the catalogues can be added for each translation independently, by simply adding the .po file in the appropriate directory and the build system will pick it up. This means that plugin authors can work independently without worrying about translations and translators can add .po files, only needing to merge with a newly generated .pot file if some options change in the xml. That is, unless your plugin displays user-visible messages somewhere else in which case it is recommended to use the same catalogue (with dgettext) and instruct translators to also merge the translations from xgettext.</p> <p>If you want to use locales for a standalone plugin installation, you have to install the catalogues (compiled to mo) in <code>&lt;PREFIX&gt;/locale/&lt;LANGUAGE&gt;/LC_MESSAGES</code>. See the <code>locale/meson.build</code> in Wayfire, WCM or Pixdecor repositories for an example. Then follow the steps above.</p>"},{"location":"Plugin-architecture/","title":"Plugin architecture","text":""},{"location":"Plugin-architecture/#architecture","title":"Architecture","text":"<p>In wayfire, each output is independent of the others and runs its own set of plugin instances. This for example lets you watch a video on a second monitor and use Expo/Cube/whatever on your main monitor without interrupting the video.</p>"},{"location":"Plugin-architecture/#interaction-with-the-core","title":"Interaction with the core","text":"<p>Most plugins interact with core in one of the following ways: 1. Through a key/button/touch binding 2. Responding to/emitting a signal 3. Attaching a hook to the rendering loop. 4. Attaching a view transformer</p>"},{"location":"Plugin-architecture/#bindings","title":"Bindings","text":"<p>Bindings are actually callbacks executed when the user presses a key combination, a specific button or touches the screen. These are generally created during the <code>init()</code> phase. A plugin can read the configuration options(the config parameter) and add the according bindings. This happens with the <code>output-&gt;add_{key,button,touch,gesture,activator, axis}()</code> APIs.</p>"},{"location":"Plugin-architecture/#signals","title":"Signals","text":"<p>Signals are events generated either by the core or other plugins, for example when a window has been created/destroyed or an output was resized. The event is accompanied with a pointer to a signal_data_t, which should be casted to the appropriate derived class. Each plugin can emit signals and add/remove listeners for signals using the <code>output-&gt;{emit,connect,disconnect}_signal()</code> APIs. Some signals are also provided by the core itself, such as <code>output-added</code> or <code>output-removed</code>.</p>"},{"location":"Plugin-architecture/#hooks","title":"Hooks","text":"<p>There are two types of hooks - render hooks and effect hooks.</p> <p>Render hooks are used to override the default renderer and thus allow plugins like Cube and Expo to draw the scene in any way they want to.</p> <p>Effect hooks are a way to execute certain actions at different stages of the render loop. <code>pre</code> hooks for example are executed right before starting to repaint the current frame, <code>overlay</code> ones happen after the scene is rendered, <code>post</code> hooks happen after the buffers were swapped. These are most useful when creating an animation.</p>"},{"location":"Plugin-architecture/#view-transformers","title":"View transformers","text":"<p>Those are the cornerstone of the various window effects. A view transformer takes the view texture, and renders it to another texture or to the screen. It has complete freedom in how to draw the view, how it can modify the view's visible size, etc. For example, the fire transformer draws a fire over the view, others may rotate it, etc. The whole motivation for transformers comes from the fact that in this way, a plugin implementing its own transformer has to worry less about side effects, because each transformer is like a \"black box\" in a sense it just gets a texture and returns another one.</p>"},{"location":"Plugin-architecture/#writing-a-plugin","title":"Writing a plugin","text":"<p>Most of the functionality of Wayfire is implemented as plugins. The easiest way to write a plugin is to fork this repo and create a new file in <code>plugins/single_plugins/&lt;your-plugin.cpp&gt;</code>, and add it in the <code>CMakeLists.txt</code> in the same directory. To avoid writing boilerplate code, you can copy the command plugin and erase all functions except the init() and newInstance().</p> <p>For each output, wayfire will call the newInstance() function. It must return a bare pointer to a new wayfire_plugin_t - the base class of all plugins. The returned pointer must point to a valid instance of the plugin which will be used on the current output. The base class is defined in <code>plugin.hpp</code> in the <code>src/api/</code> folder. There you can also find definitions for most of the callbacks.</p> <p>To initialize the plugin, the core will call the init() function, passing also the configuration options. Apart from setting up bindings, signals and/or renderer, the init function must firstly initialize its grab_interface, specifying the its name and abilities mask. For more information, check the source code of the plugins. Don't hesitate to ask questions on #wayfire at libera.chat</p>"},{"location":"Project-goals/","title":"Project goals","text":"<p>Broadly speaking, the projects in WayfireWM can be divided in two groups:</p> <ol> <li> <p>Wayfire as a compositor. Here, the main repositories are wayfire and the supporting libraries wf-config, wf-utils and wf-touch.</p> </li> <li> <p>Wayfire as a small desktop environment. The most important components are wf-shell and wcm, also wf-install and wf-osk. wayfire-plugins-extra is a little weird, because it is much more closely tied to the compositor, but is still optional.</p> </li> </ol>"},{"location":"Project-goals/#compositor","title":"Compositor","text":"<p>Currently, the compositor (and so everything in group 1) is where the most development effort goes. There are multiple reasons for that:</p> <ul> <li>The compositor has the most features and responsibilities.</li> <li>The compositor defines the API for plugins, one of the main selling points of Wayfire. A stable API is a prerequisite for expanding Wayfire's external plugins without requiring their constant maintenance.</li> <li>The compositor can be shared with other desktop projects like carbonOS and DesQ.</li> </ul>"},{"location":"Project-goals/#goals","title":"Goals","text":"<ol> <li>Be as flexible as possible, while providing an easy-to-use framework. Since these goals often conflict, a compromise needs to be made.</li> <li>Do not include unnecessary features in core or in the core plugins. They only weigh the project down. Core plugins are supposed to fit at least one of the following criteria:<ul> <li>Show how to implement common DE/window manager functionality in Wayfire. vswitch, switcher, expo, scale, simple-tile all fit here. Feature-completeness is however not a goal in itself.</li> <li>Demonstrate various features of the Wayfire API, for example extra-gestures, cube and decoration.</li> <li>Plugins which try to push the boundaries of what is possible are sometimes also included. Blur, Wobbly, simple-tile.</li> </ul> </li> <li>Plugins should be as modular and as self-contained as possible, even if this means missing on features which require integration between multiple plugins. Rationale: core plugins should be easy to replace, and to integrate in other projects/DEs based on Wayfire.</li> </ol>"},{"location":"Project-goals/#is-there-a-roadmap-somewhere","title":"Is there a roadmap somewhere?","text":"<p>The closest thing to a roadmap are the milestones on Github. They represent a minimal set of bugs/features which need to be implemented for a given release. They are the 'priority' issues for a release. But of course, other contributions are welcome, we do not follow a strict plan (we can always implement more, not less).</p> <p>In general, current development is focused on stabilizing core and the core plugins and polishing the API. Few new plugins and features are accepted, except if they don't fit the described goal. If you think that something important is missing though, feel free to reach out.</p>"},{"location":"Project-goals/#de-components","title":"DE Components","text":"<p>A secondary goal for WayfireWM is the creation of a small desktop environment. This is especially useful as users can see a graphical interface to the compositor, with a background, panel, etc., because neither of these things are provided by the compositor itself.</p> <p>Because of limited resources, these parts of the project have a lot of rough edges and missing features. In addition, there is no concrete plan for the future development of wf-panel, wf-osk and others. Thus, not many new features and bug fixes are to be expected in the foreseeable future (at least until Wayfire 1.0). This doesn't mean that PRs are not desired! External contributions are welcome, be they small or big. Even large refactors/changes are acceptable, if you have an idea how we can make these projects better.</p>"},{"location":"Related-projects/","title":"Related projects","text":"<p>Here is a list of projects which are related to Wayfire.</p> <p>See also the wlroots wiki and awesome-wlroots for a list of projects which utilize <code>wlr</code> protocols, which are also supported in Wayfire.</p>"},{"location":"Related-projects/#desktop-environments","title":"Desktop environments","text":"<ul> <li>Paper</li> <li>DesQ</li> <li>Genesis</li> <li>RDE</li> <li>carbonOS (project archived)</li> <li>waysmoke (project archived)</li> </ul>"},{"location":"Related-projects/#linux-distributions","title":"Linux distributions","text":"<ul> <li>~~Garuda Linux Wayfire~~ - An Arch based Linux distro with a Wayfire based Desktop Environment (was removed in 2022 but might come back)</li> <li>Peux OS Wayfire - An Arch based Linux distro with a Wayfire based Desktop Environment</li> </ul>"},{"location":"Related-projects/#panels","title":"Panels","text":"<ul> <li>Waybar - Highly customizable Wayland bar for Wlroots based compositors, written in C++.</li> <li>Wf-panel (Gtk3) - A GTK4-based panel for Wayfire, written in C++.</li> <li>Panorama Panel - Configurable, modular and traditional desktop panel, designed for Wayfire and written in Python.</li> </ul>"},{"location":"Related-projects/#plugins","title":"Plugins","text":""},{"location":"Related-projects/#plugin-collections","title":"Plugin collections","text":"<ul> <li>wayfire-plugins-extra - Repository of additional Wayfire plugins</li> <li>filters - Apply shaders to windows or outputs via ipc scripts</li> <li>ammen99-plugins - ammen99's personal plugins</li> </ul>"},{"location":"Related-projects/#decorations","title":"Decorations","text":"<ul> <li>pixdecor - A highly configurable decorator plugin featuring antialiased rounded corners with shadows and optional animated effects</li> <li>~wayfire-firedecor~ - Alternative window decoration plugin for much greater configuration</li> <li>cosmodecor - An advanced window decoration plugin for the wayfire window manager, continuation of firedecor.</li> </ul>"},{"location":"Related-projects/#switchers","title":"Switchers","text":"<ul> <li>wWP Switcher - Classic switcher plugin for Wayfire</li> <li>qwf-overview - Displays an overview of all open windows, similar to the GNOME Activity Overview</li> </ul>"},{"location":"Related-projects/#gestures","title":"Gestures","text":"<ul> <li>wstroke - Port of Easystroke mouse gestures</li> <li>~wf-globalgestures~ - Allow clients to handle touchpad gestures globally via a special protocol - not maintained</li> <li>~wf-touchpad-gesture-drag~ - Implements 3-finger drag for multi-touch touchpads - not maintained</li> </ul>"},{"location":"Related-projects/#configuration-backends","title":"Configuration backends","text":"<ul> <li>~wf-gsettings~ - GSettings configuration backend - not maintained</li> <li>hjson-config-backend - HJson based config backend for wayfire.</li> </ul>"},{"location":"Related-projects/#other-stuff","title":"Other stuff","text":"<ul> <li>laser-search - Search and launch applications with a stylish, intuitive, standalone application</li> <li>wf-info - A simple wayfire plugin and program to get information from wayfire.</li> <li>wf-mod2key - xcape style \"press modifier on its own to press another key combo\" plugin</li> <li>wf-wallpaper - Advanced wallpaper plugin</li> <li>wayfire-shadows - Add shadows around windows</li> <li>wayfire-kbdd-plugin - Per-window keyboard layout plugin</li> <li>wf-scud - PaperWM-inspired window management plugin</li> <li>wf-dynspaces - Dynamic workspace management with fullscreen-apps-as-workspaces</li> <li>wayfire-toplevel-management - A more advanced version of the foreign-toplevel-management protocol.</li> </ul>"},{"location":"Related-projects/#setups","title":"Setups","text":"<ul> <li>Wayfire Dots</li> </ul>"},{"location":"Rendering/","title":"Backends","text":"<p>In the Wayland ecosystem, compositors typically use either OpenGL ES or Vulkan for rendering, and the pixman library in rarer cases for software rendering. Each has different strengths and weaknesses:</p> <ul> <li> <p>OpenGL ES is GPU-accelerated, widely supported and well-tested. Wayfire used to support only this backend and as a result many special effects plugins are geared towards it - for example Cube, Wobbly, Fire animation to name a few. These plugins will not work with the other renderers, as porting them to Vulkan is still not done.</p> </li> <li> <p>Vulkan is a newer GPU-accelerated renderer. It is still considered experimental in wlroots, however it has the potential to lower the CPU overhead. Moreover, newer work on color management in wlroots is focused on it, which makes color management currently work primarily with the vulkan renderer only.</p> </li> <li> <p>Pixman is a software (CPU-based) renderer. It is useful mostly for testing purposes and on some systems where the GPU is unavailable or does not support the necessary functionality for rendering, as its performance is far from optimal.</p> </li> </ul> <p>Wayfire utilizes the <code>wlr_renderer</code> abstraction which supports all of these backends. It is sufficient for simple compositing operations, as well as scaling and translation.</p>"},{"location":"Rendering/#special-effects","title":"Special effects","text":"<p>Some plugins mentioned in the previous section like Cube, Wobbly and Blur need custom rendering operations not available in <code>wlr_renderer</code> like 3D transformations and custom shaders. They are currently implemented only via OpenGL ES commands inserted in the rendering pipeline and therefore will need updates to work with Vulkan.</p>"},{"location":"Rendering/#auxilliary-buffers","title":"Auxilliary buffers","text":"<p>Plugins like Expo need additional buffers to render to. Wayfire's rendering API provides three classes to deal with buffers:</p> <ul> <li><code>wf::render_buffer_t</code> is a very simple wrapper holding a <code>wlr_buffer</code> together with its size.</li> <li><code>wf::auxilliary_buffer_t</code> is a helper class to manage temporary buffers used by various plugins. Its main function is to manage the backing <code>wlr_buffer</code> and <code>wlr_texture</code> (used when sampling from the buffer) and to automatically free them when it goes out of scope.</li> <li><code>wf::render_target_t</code> is a subclass of <code>wf::render_buffer_t</code>. It can be constructed either from a given <code>wf::render_buffer_t</code> or <code>wf::auxilliary_buffer_t</code> and contains additional information for the rendering process like buffer transform, scaling options, mapping from logical coordinates to buffer coordinates, etc.</li> </ul>"},{"location":"Scenegraph/","title":"Scenegraph","text":"<p>The scenegraph is an extensible core structure which contains the rendering and input state of Wayfire. It is built like a tree, where each nodes implements the <code>scene::node_t</code> interface. Each node may have children (usually nodes with children are subclasses of <code>scene::floating_inner_node_t</code>), or it may be a leaf node. Inner nodes serve two purposes. On one hand, they can be used to group nodes together (so, views can be organized in outputs, layers, etc.). On the other hand, nodes can apply transformations to their children. A core design principle is the following: each node, and it alone, knows what kind of transformation it applies to its children. Examples of nodes are layers, outputs, views, view transformers and plugin grabs. So how does all of this mesh together?</p>"},{"location":"Scenegraph/#stacking-order","title":"Stacking order","text":"<p>The first and simplest task accomplished with the scenegraph is that its structure encodes the stacking order of views and other rendering/input elements. This used to be a task of each output's workspace-manager. And as they say, a picture is worth a thousand words, so here is an example of Wayfire's scenegraph at runtime (many nodes were omitted for the sake of clarity):</p> <p></p> <p>There are multiple notable things here.</p> <p>First, there is one node per layer. Each output has its own node in each layer, which contains the views on that output belonging to that layer. This is different than previous verions of Wayfire, where each output has its own list of layers. The new version enables core to handle views visible on all outputs - this can be achieved by for example putting the view directly in the children list of the layer node (however, most of the plugins in the main repo may have a hard time dealing with such views, because they assume each view is bound to a single output).</p> <p>Each view contains multiple nodes. A view has a root node which contains the view and its child views (most commonly dialogs). As a child of the view root, each view has a so called \"transformed\" node. This is the node which contains the view with its subsurfaces and transformers. In the hierarchy, it is followed by the transformer nodes themselves (in the example blur) and then finally by a surface root node. The surface root marks the beginning of the surface hierarchy belonging to the view. The principle is this: each surface is represented by a surface root, and a surface node attached to it. The root nodes of subsurfaces are children of the root nodes of their parents, as can be seen on the picture.</p> <p>With this structure, the scenegraph can represent the entire state required for rendering and input handling in a unified manner. Next, we will take a look at the interfaces that scenegraph nodes have to facilitate these operations.</p>"},{"location":"Scenegraph/#pointer-and-touch-input","title":"Pointer and touch input","text":"<p>When a pointer or touch event arrives, core needs to figure out which node should receive this event. To this purpose, <code>node_t</code> subclasses can implement the <code>node_t::find_node_at()</code> function, which returns the node in the node's subtree which should receive input focus. To facilitate implicit grabs and other transformations, nodes can implement <code>node_t::to_local()</code> and <code>node_t::to_global()</code>. These functions convert between the node's coordinate system (local) and its parent's (global). Remember that each node may apply arbitrary transformations to nodes, but the details are hidden behind the <code>node_t</code> interface - so scenegraph users know that there are local and global coordinate systems, but cannot know the exact mapping without knowing the exact node type. Finally, to actually handle the events, nodes may override <code>pointer_interaction()</code> and <code>touch_interaction()</code> which should return pointers to structures which can handle the input events. Often times, the nodes themselves implement <code>pointer_interaction_t</code> and return <code>this</code> in these functions, so that their own callbacks are called on pointer enter/motion/etc. when they have pointer focus.</p> <p>At this point it may be worth noting which nodes typically apply a transformation to their input: output nodes apply an offset to their children so that the current workspace of each output always appears to have its top-left corner at <code>(0, 0)</code>. Surface root nodes apply offsets so that their main surfaces are at <code>(0, 0)</code>. Last but not least, view transformers usually apply slightly more complex transformations (for example <code>view_2d_transformer</code> supports arbitrary affine 2D transformations).</p> <p>Note that the <code>find_node_at()</code> method allows nodes to cut off parts of their children by returning a null node for a set of input points. Output nodes do that to ensure a view is visible on its primary output only, except if the experimental <code>workarounds/remove_output_limits</code> is set. Nodes may also use this function to transfer input to another node or do other similar transformations.</p> <p>Interesting detail here are drag-and-drop actions. Currently, drag-and-drop is implemented by the originating node: if the client starts DnD, the originating node keeps its implicit grab on the input as long as the user keeps their pointer button pressed. The implicit grab means that it receives all input events. However, the node internally passes the input to the node currently under the pointer, by calling <code>find_node_at()</code>.</p>"},{"location":"Scenegraph/#rendering","title":"Rendering","text":"<p>Rendering in scenegraph could have been similar to input handling (and to pre-scenegraph rendering), that is, each node could in theory have a simple <code>node_t::render(target)</code> method. However, one of the toughest problems in rendering is damage tracking - keeping track of which regions of an output or a buffer need to be repainted. As the scenegraph tries not to assume that nodes are rendered in a particular order, or that each node may be rendered only once (imagine a drag and drop icon straddling two outputs), we need a way to track each appearance of a node. Enter <code>scene::render_instance_t()</code>. Render instances are specific for each node (as each node may have different transformations), so to generate render instances for a node, we can use the factory method <code>node_t::gen_render_instances()</code>. Then, each time we want to render the node (and its children), we need to run the so-called render pass. The documentation in scene-render.hpp contains a full description of a render pass, however, the gist of it is the following:</p> <ol> <li>We calculate the damaged region for each render instance by calling <code>render_instance_t::schedule_instructions()</code>. Nodes may add or subtract damage in the process as they see fit. For example, opaque surfaces subtract their region from the damage, so that nodes below them do not repaint the region unnecessarily (and of course transformers may block this, as they are above them in the hierarchy).</li> <li>We execute the generated instructions - this is the actual rendering step.</li> </ol> <p>One thing node implementations have to keep in mind is that each node's render instance needs to generate and manage render instances for its children. Sometimes, this is as easy as calling their <code>gen_render_instances()</code> method without applying any transformations. However, often times render instances keep a private list of children instances, and manually call their methods and track damage coming from them.</p> <p>This mechanism is enough to completely replace the view transformers found in Wayfire up to the 0.7 version. View transformer nodes are used to create various effects which modify the appearance of a view. Transformers are supposed to work in the following way:</p> <ol> <li>By overriding <code>to_local()</code> and <code>to_global()</code>, transformer nodes may transform the input to a given surface. This is done for example by the 2D and 3D transformers and some others. (Prior to Wayfire 0.8.0, view transformers had this via the <code>transform/untransform_point</code> methods).</li> <li>Nodes should always report a correct bounding box for themselves. As this bounding box depends on the exact transformer node type, nodes may override the virtual <code>get_bounding_box()</code> function. To get the bounding box of the children of a node without their parent's transformation applied, plugins can use the <code>node_t::get_children_bounding_box()</code> method.</li> <li>When <code>frame_done</code> or <code>presentation_feedback</code> events arrive at a transformer node, it should generally forward them to its children.</li> <li>As previously explained, rendering happens via render instances. This means that each transformer node needs to have an associated render instance class, which is then generated in the factory method <code>node_t::gen_render_instances()</code>. In addition, transformers render instances should generate \"nested\" render instances for their children and transform the damage which comes from them.</li> <li>When a render instance is instantiated, it gets a damage callback, which it can call to report that a region (in the node's coordinate system) needs to be repainted. Transformer render instances in turn also need to pass a damage callback to their children's instances when they generate them. Usually, transformer nodes have a function which takes the damage from the children and transforms it, then reports the transformed damage region via the callback the transformer's render instance has received during instantiation.</li> <li>Finally, transformer render instances need to do the actual rendering. Most transformers render their children to an auxiliary buffer and then render this buffer with a custom shader.</li> </ol> <p>As all these operations are rather complex, but repetitive, most transformer render instances can instead derive from <code>scene::transformer_render_instance_t</code>. The base class does most of the managing of children instances. This base class takes care of 3. and 4. For 5., view transformer instances using this helper class only need to implement the <code>transform_damage_region()</code>. As for 6., they can use <code>get_texture()</code> before rendering to get a texture containing the children nodes.</p> <p>Lastly, view transformer nodes are usually not added directly as a scenegraph nodes, but with the <code>add_transformer</code> and <code>remove_transformer</code> methods of the transformed node of each view. These functions take care of adding the transformer at the correct place in the hierarchy and support specifying ordering between the different transformers.</p>"},{"location":"Scenegraph/#keyboard-input","title":"Keyboard input","text":"<p>Keyboard input also gets special treatment with the scenegraph. Namely, some nodes need to block others below them from obtaining input (plugin grabs), or may need to request a higher priority for receiving keyboard input (layer-shell exclusive input). This is done via the <code>node_t::keyboard_refocus()</code> method. There, each node may specify whether it wants to receive input focus and with what importance it wants input focus. Ties are resolved by keeping track of the last time each node was focused (<code>last_focused_timestamp</code>).</p>"},{"location":"Tips-%26-Tricks/","title":"Tips &amp; Tricks","text":"<p>Table of Contents</p> <ul> <li>Gtk+3 applications slow startup or .desktop files not opening</li> <li>Run xwayland apps as root </li> <li>Wine</li> <li>Screensavers</li> <li>Login and gtkgreet with wayfire</li> <li>Logout and shutdown</li> <li>Remote desktop</li> <li>Native webcam</li> <li>High CPU usage</li> <li>Catch crashes with systemd-coredump</li> <li>Screen sharing</li> <li>Setting up monitor frequency if wayfire.ini does not work</li> <li>GTK Theme not working</li> <li>Getting the title and app-id of windows</li> <li>Starting Wayfire as a systemd service</li> <li>Apps are not focused when expected</li> </ul>"},{"location":"Tips-%26-Tricks/#gtk3-applications-slow-startup-or-desktop-files-not-opening","title":"Gtk+3 applications slow startup or .desktop files not opening","text":"<p>This is due to GTK+ waiting for xdg-desktop-portal to start via D-Bus. This times out because the D-Bus activated service doesn't know what <code>WAYLAND_DISPLAY</code> to connect to. This can also cause some .desktop files not to open on XDG Desktop Entry spec-compliant menus (like <code>wf-panel</code>) if they are <code>DBusActivatable=true</code>. Add the following to your configuration file: <pre><code>[autostart]\n0_environment = dbus-update-activation-environment --systemd WAYLAND_DISPLAY DISPLAY XAUTHORITY\n</code></pre> For more details: https://github.com/WayfireWM/wayfire/issues/775</p>"},{"location":"Tips-%26-Tricks/#run-xwayland-apps-as-root","title":"Run xwayland apps as root","text":"<p>This is a small wrapper script that uses <code>xhost</code> and <code>sudo</code> to launch x11 clients as root under xwayland. Save to a file, make executable and use in place of sudo to run an x11 client with privileges in wayfire.</p> <pre><code>#!/bin/bash\n# small script to enable root access to x-windows system\n\n# enable root access\nxhost +SI:localuser:root\n\nsudo -E $@\n\n# disable root access after application terminates\nxhost -SI:localuser:root\n</code></pre>"},{"location":"Tips-%26-Tricks/#wine","title":"Wine","text":"<p>If you are having trouble with wine applications, such as input not responding, tearing windows, or buggy mouse behavior in some fullscreen games check the following: - Make sure xwayland is enabled in wayfire meson configure output and in wayfire.ini [core] xwayland = 1 - In winecfg in the Graphics tab, enable 'Automatically capture mouse in full screen mode', disable 'Allow the window manager to decorate the windows', disable 'Allow the window manager to control the windows' and enable 'Emulate a virtual desktop'</p> <p>Note for Wine/Proton games launched via Stream: you may need to set <code>WINEPREFIX</code> and <code>WINEARCH</code> and call the correct <code>wine</code> executable for the game you are configuring. For example (adjusting the command for the particular game id and steam installation path):</p> <pre><code>WINEPREFIX=~/.local/share/Steam/steamapps/compatdata/11020/pfx/ WINEARCH=win64 ~/.local/share/Steam/steamapps/common/Proton\\ -\\ Experimental/files/bin/wine64 winecfg.exe\n</code></pre>"},{"location":"Tips-%26-Tricks/#screensavers","title":"Screensavers","text":"<p>The Idle plugin offers a built in screensaver for wayfire. It has options to choose either DPMS or screensaver timeout. If the cube plugin is enabled, the Idle screensaver timeout will rotate the cube based on settings found in the Idle plugin. Otherwise, the screen will just become black on timeout. There is also swayidle which can be used in conjunction with a special version of xscreensaver. It is recommended to install this version of xscreensaver to a nonstandard prefix because it will not work correctly with X. To use it, make two entries in the Autostart plugin like so: <pre><code>a2 = /opt/xscreensaver/bin/xscreensaver -nosplash\na3 = swayidle timeout 60 '/opt/xscreensaver/bin/xscreensaver-command -activate' resume '/opt/xscreensaver/bin/xscreensaver-command -deactivate'\n</code></pre> Change the prefix accordingly. The first will start the daemon and the second will activate the screensaver after 60 seconds of inactivity. You may change this value to your liking.</p>"},{"location":"Tips-%26-Tricks/#login-and-gtkgreet-with-wayfire","title":"Login and gtkgreet with wayfire","text":"<p>This is a sample config that uses gtkgreet and wayland-logout and can be used with <code>wayfire -c</code> <pre><code>[autostart]\nautostart_wf_shell = false\ndm = gtkgreet -l &amp;&amp; wayland-logout\n\n[core]\nplugins = autostart\nvheight = 1\nvwidth = 1\nxwayland = false\n</code></pre></p>"},{"location":"Tips-%26-Tricks/#logout-and-shutdown","title":"Logout and shutdown","text":"<p>Wayfire has a hard coded keybinding Ctrl+Alt+BkSpc to shutdown. It also supports layer shell protocol, which makes it possible to use a program such as wlogout to log out and shut down. There is also wayland-logout which kills the current wayland compositor instance.</p>"},{"location":"Tips-%26-Tricks/#remote-desktop","title":"Remote desktop","text":"<p>With virtual pointer support, programs like wayvnc are possible.</p> <p>If you find that your pointer is not following the cursor on the virtual desktop you might need to map the virtual input to the specific output wayvnc is running on. https://github.com/WayfireWM/wayfire/wiki/Configuration#input-device-specific-options</p> <p>In your wayfire config file add: <pre><code>[input-device:wlr_virtual_pointer_v1]\noutput = DP-1\n\n[input-device:wlr_virtual_keyboard_v1]\noutput = DP-1\n</code></pre> change device and output names accordingly. </p> <p>You can get the name of the input device by reviewing the wayfire log when connecting to a wayvnc session. Wayfire should be run with the debug option wayfire -d</p>"},{"location":"Tips-%26-Tricks/#native-webcam","title":"Native webcam","text":"<p>Use the following command to show /dev/video0 in a native window with gst-launch-1.0 (gstreamer). Note that glimagesink must be available. <pre><code>gst-launch-1.0 -v v4l2src device=/dev/video0 ! glimagesink\n</code></pre></p>"},{"location":"Tips-%26-Tricks/#high-cpu-usage","title":"High CPU usage","text":"<p>Compile wayfire with the <code>release</code> buildtype to enable performance optimizations. <pre><code>meson -Dbuildtype=release build\n</code></pre></p>"},{"location":"Tips-%26-Tricks/#catch-crashes-with-systemd-coredump","title":"Catch crashes with systemd-coredump","text":"<p>Build wayfire with the flag <code>-Dprint_trace=false</code></p>"},{"location":"Tips-%26-Tricks/#screen-sharing","title":"Screen sharing","text":"<p>To enable screen sharing in chromium</p> <p>Add the following lines to the configuration file <code>wayfire.ini</code></p> <p><pre><code>[autostart]\n\n0_0 = systemctl --user import-environment\nxdg = sleep 1 &amp;&amp; (XDG_SESSION_TYPE=wayland XDG_CURRENT_DESKTOP=sway /usr/lib/xdg-desktop-portal --replace &amp; /usr/lib/xdg-desktop-portal-wlr)\n</code></pre> (This is for arch linux, for other distributions the path could have /libexec/ instead of /lib/)</p> <p>Install <code>xdg-desktop-portal</code> and <code>xdg-desktop-portal-wlr</code></p> <p>Edit the configuration file <code>~/.config/xdg-desktop-portal-wlr/config</code></p> <p><pre><code>[screencast]\noutput_name=\nmax_fps=30\nchooser_cmd=slurp -f %o -or\nchooser_type=simple\n</code></pre> (you should add your output_name)</p> <p>test that this script works: https://gitlab.gnome.org/-/snippets/19</p> <p>set this flag on chrome</p> <p>chrome://flags/#enable-webrtc-pipewire-capturer</p>"},{"location":"Tips-%26-Tricks/#setting-up-monitor-frequency-if-wayfireini-does-not-work","title":"Setting up monitor frequency if wayfire.ini does not work","text":"<p>If your output = kanshi as default, you may need to create a config file in $HOME/.config/kanshi/config with your desired settings e.g: <pre><code>profile { \n    output DP-1 mode 2560x1080@74.990997 position 0,0\n}\n</code></pre></p> <p>See kanshi git for more info: https://github.com/emersion/kanshi</p>"},{"location":"Tips-%26-Tricks/#gtk-theme-not-working","title":"GTK Theme not working","text":"<p>This script from a sway article can set your theme for you, assuming you already had one set with X.</p> <pre><code>#!/bin/sh\n# .config/setWaylandTheme.sh\n\n# usage: import-gsettings\nconfig=\"${XDG_CONFIG_HOME:-$HOME/.config}/gtk-3.0/settings.ini\"\nif [ ! -f \"$config\" ]; then exit 1; fi\n\ngnome_schema=\"org.gnome.desktop.interface\"\ngtk_theme=\"$(grep 'gtk-theme-name' \"$config\" | sed 's/.*\\s*=\\s*//')\"\nicon_theme=\"$(grep 'gtk-icon-theme-name' \"$config\" | sed 's/.*\\s*=\\s*//')\"\ncursor_theme=\"$(grep 'gtk-cursor-theme-name' \"$config\" | sed 's/.*\\s*=\\s*//')\"\nfont_name=\"$(grep 'gtk-font-name' \"$config\" | sed 's/.*\\s*=\\s*//')\"\ngsettings set \"$gnome_schema\" gtk-theme \"$gtk_theme\"\ngsettings set \"$gnome_schema\" icon-theme \"$icon_theme\"\ngsettings set \"$gnome_schema\" cursor-theme \"$cursor_theme\"\ngsettings set \"$gnome_schema\" font-name \"$font_name\"\n</code></pre> <p>add the script to autostart in your wayfire.ini. don't forget to add exec permissons.</p> <pre><code>[autostart]\na0 = ~/.config/setWaylandTheme.sh\n</code></pre>"},{"location":"Tips-%26-Tricks/#getting-the-title-and-app-id-of-windows","title":"Getting the title and app-id of windows","text":"<p>Getting the title and/or app-id of a view/window (e.g. for use with the <code>window-rules</code> plugin) requires the use of the <code>wlr-foreign-toplevel-management-v1</code> protocol. Prior to Wayfire 0.8.0, this was implemented in core, but it's now implemented by the <code>foreign-toplevel</code> plugin.</p> <p>Once support is enabled, a list of the title and app-id of views/windows can be found via the <code>lswt</code> program. Alternatively, one can compile and run the <code>foreign-toplevel.c</code> program; prior to 2023-10-12, this was available in the <code>examples</code> directory of the wlroots source, but is now part of the wlr-clients repository.</p>"},{"location":"Tips-%26-Tricks/#starting-wayfire-as-a-systemd-service","title":"Starting Wayfire as a systemd service","text":""},{"location":"Tips-%26-Tricks/#system-unit","title":"System Unit","text":"<p>You should obviously consider the security implications that starting wayfire automatically could have.</p> <p>These instructions are inspired from Weston's. In order to start wayfire, we need to have a libseat session running (which is why it's not possible eg. to start it directly from an ssh session), and the unit adds boilerplate that enables it.</p> <pre><code>[Unit]\nDescription=Wayland Compositor Service\nAfter=systemd-user-sessions.service\nAfter=graphical.target\nAfter=session-c1.scope\n\n[Service]\nType=simple\nExecStart=/usr/bin/wayfire\nRestart=always\nRestartSec=10\nUser=wayfireuser\n\n# Reuse /etc/pam.d/login\nPAMName=login\n\n# Set some useful variables\nEnvironment=XDG_RUNTIME_DIR=/run/user/%U\nEnvironment=DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/%U/bus\nEnvironment=LIBSEAT_BACKEND=logind\nEnvironment=XDG_SESSION_CLASS=greeter\nEnvironment=XDG_SESSION_TYPE=wayland\n\n# A virtual terminal is needed, we're using #7\nTTYPath=/dev/tty7\nTTYReset=yes\nTTYVHangup=yes\nTTYVTDisallocate=yes\n\n# Fail to start if not controlling the tty.\nStandardInput=tty-fail\n\n# To get -d output\nStandardOutput=journal\nStandardError=journal\n\n# Log this user with utmp, letting it show up with commands 'w' and 'who'.\nUtmpIdentifier=tty7\nUtmpMode=user\n\n# Activate seat... cf. https://github.com/cage-kiosk/cage/issues/383\nExecStartPre=+chvt 7\n\n[Install]\nWantedBy=graphical.target\n</code></pre>"},{"location":"Tips-%26-Tricks/#apps-are-not-focused-when-expected","title":"Apps are not focused when expected","text":"<p>E.g. when opening a file, an already open text editor view should be focused. If this is not working, you need to enable the XDG Activation protocol plugin</p>"},{"location":"Tutorial/","title":"Tutorial","text":"<p>Table of contents</p> <ul> <li>Default key-bindings</li> <li>Using Wayfire</li> <li>Opening terminals and moving around</li> <li>Opening other applications</li> <li>Closing windows</li> <li>Moving windows</li> <li>Resizing windows</li> <li>Switching between windows</li> <li>Positioning windows</li> <li>Using workspaces</li> <li>Moving windows to workspaces</li> <li>Changing the opacity</li> <li>Reloading the configuration</li> <li>Exiting Wayfire</li> <li>Configuring Wayfire</li> <li>Setting your keyboard layout</li> <li>Terminal</li> <li>Application launcher</li> <li>Setting the wallpaper</li> <li>Adding a panel and dock</li> <li>Configuring viewport switcher</li> <li>Configuring your outputs</li> <li>Notifications</li> <li>Idle configuration</li> <li>Screen locker</li> <li>Logout</li> <li>Changing the volume</li> <li>Changing the screen brightness</li> <li>Screen color temperature</li> <li>Taking screenshots</li> <li>Creating screencasts</li> <li>Automatically maximizing windows</li> <li>Remote desktop</li> </ul>"},{"location":"Tutorial/#default-key-bindings","title":"Default key-bindings","text":"<p>Here is an overview (non-exhaustive) of the key-bindings you can find in the [<code>wayfire.ini</code>] config file. A comprehensive reference of bindings available by default is available Here.</p> <ul> <li>Super + e \u21d2 Overview all workspaces.</li> <li>[hjklEnterHomeEnd] \u21d2 Switch to the specified workspace; add Shift for bottom.</li> <li>Super + Enter \u21d2 Open a terminal (Alacritty).</li> <li>Super + Shift + Enter \u21d2 Open the launcher (Wofi).</li> <li>Super + w \u21d2 Close window.</li> <li>Super + Tab \u21d2 Preview windows and select the next window; add Shift for previous.</li> <li>Alt + Escape \u21d2 Select the next window.</li> <li>Super + [UpDownLeftRightHomeEndfd] \u21d2 Arrange window into a grid; add Shift for bottom.</li> <li>Super + [hjkl] \u21d2 Switch to adjacent workspace; add Shift to move with the focused window.</li> <li>Super + Control + [hl] \u21d2 Switch to the previous or next workspace, by using the cube.</li> <li>Super + o \u21d2 Move focus to the next output; add Shift to move with the focused window.</li> </ul> <p>Note that you probably need to adapt the applications, such as the terminal and launcher, in your config file.</p>"},{"location":"Tutorial/#using-wayfire","title":"Using Wayfire","text":""},{"location":"Tutorial/#opening-terminals-and-moving-around","title":"Opening terminals and moving around","text":"<p>One very basic operation is opening a new terminal. By pressing Super + Enter, a new terminal will be opened. By default, the key-binding opens Alacritty.</p> <p></p>"},{"location":"Tutorial/#opening-other-applications","title":"Opening other applications","text":"<p>Aside from opening applications from a terminal, you can also use the handy Wofi which is opened by pressing Super + Shift + Enter by default.</p> <p></p> <p>Additionally, if you have applications you open very frequently, you can create a key-binding for starting the application directly. See the section Configuring Wayfire for details.</p>"},{"location":"Tutorial/#closing-windows","title":"Closing windows","text":"<p>If an application does not provide a mechanism for closing (most applications provide a menu, the middle mouse button for tabs, the escape key or a shortcut like Control + w to close), you can press Super + w, Super and middle mouse button or Alt + F4 to close a window.</p> <p></p>"},{"location":"Tutorial/#moving-windows","title":"Moving windows","text":"<p>By dragging the window\u2019s title bar with your mouse you can move the window around. You can also drag windows by holding down Super and left mouse button.</p> <p></p>"},{"location":"Tutorial/#resizing-windows","title":"Resizing windows","text":"<p>By grabbing the borders and moving them you can resize the window. You can also do that by holding down Super and right mouse button.</p> <p></p>"},{"location":"Tutorial/#switching-between-windows","title":"Switching between windows","text":"<p>By pressing Super + Tab, you can preview the windows in the current workspace and select the next window; add Shift for previous. To switch without animation, press Alt + Escape.</p> <p></p>"},{"location":"Tutorial/#positioning-windows","title":"Positioning windows","text":"<p>Press Super and the arrow keys for arranging windows into a grid of 2 cells. Press Super + [HomeEnd] for arranging windows into a grid of 4 cells; add Shift for bottom. Press Super + f to position the window in the center of the screen. Press Super + d to restore the window to its original size and position. You can also use the keypad, which is laid out exactly to match the slots.</p> <p></p>"},{"location":"Tutorial/#using-workspaces","title":"Using workspaces","text":"<p>Workspaces are an easy way to group a set of windows. Wayfire allows you to arrange your workspaces spatially, rather than linearly. By default, there is 9 \u2013 3 horizontal and 3 vertical \u2013 workspaces, and you are on the first workspace.</p> <p>To switch to another workspace, press Super + HJKL; add Shift to move with the focused window.</p> <p></p> <p>You can also use the cube, by holding Super + Shift and left mouse button, or via the keyboard with Super + Control + [hl].</p> <p></p> <p>Pressing Super allows you to preview all workspaces in the current output. You can use your mouse to select a workspace. HJKL, Enter, Home and End can be used to select a workspace with your keyboard; add Shift for bottom.</p> <p></p>"},{"location":"Tutorial/#moving-windows-to-workspaces","title":"Moving windows to workspaces","text":"<p>To move a window to another workspace, simply press Super + Shift + HJKL.</p>"},{"location":"Tutorial/#changing-the-opacity","title":"Changing the opacity","text":"<p>When the modifier key Super + Alt is held down, you can scroll down and up to adjust the opacity of the window.</p>"},{"location":"Tutorial/#reloading-the-configuration","title":"Reloading the configuration","text":"<p>To reload the configuration, simply save the config file. Most of the options are automatically reloaded.</p>"},{"location":"Tutorial/#exiting-wayfire","title":"Exiting Wayfire","text":"<p>Press Control + Alt + Backspace.</p> <p>TODO: Add a configuration option.</p>"},{"location":"Tutorial/#configuring-wayfire","title":"Configuring Wayfire","text":"<p>To change the configuration of Wayfire, copy [<code>wayfire.ini</code>] to <code>~/.config/wayfire.ini</code> and edit it with a text editor. For a complete reference, see the Configuration document.</p>"},{"location":"Tutorial/#setting-your-keyboard-layout","title":"Setting your keyboard layout","text":"<p><code>~/.config/wayfire.ini</code></p> <pre><code>[input]\nxkb_layout = us,fr\nxkb_variant = dvorak,bepo\n</code></pre> <p>See Input for more information.</p>"},{"location":"Tutorial/#terminal","title":"Terminal","text":"<p>Open Alacritty, kitty or another terminal:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nbinding_terminal = &lt;super&gt; KEY_ENTER\ncommand_terminal = alacritty\n</code></pre> <p>See Command for more information.</p>"},{"location":"Tutorial/#application-launcher","title":"Application launcher","text":"<p>Example \u2013 Run Wofi, a graphical launcher, similar to dmenu:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nbinding_launcher = &lt;super&gt; &lt;shift&gt; KEY_ENTER\ncommand_launcher = wofi\n</code></pre> <p>Note: Add <code>mode=run</code> or <code>mode=drun</code> to <code>~/.config/wofi/config</code>. You can also specify the mode with <code>--show</code> option.</p> <p>You might prefer fzf running in a terminal.</p> <p>Example \u2013 Run Launcher with fzf and Alacritty:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nbinding_launcher = &lt;super&gt; &lt;shift&gt; KEY_ENTER\ncommand_launcher = alacritty --command sh -c 'nohup launcher-run $(launcher-list | fzf) &gt; /dev/null'\n</code></pre> <p>See Command for more information.</p>"},{"location":"Tutorial/#setting-the-wallpaper","title":"Setting the wallpaper","text":"<p>You can use <code>wf-background</code>, provided by wf-shell.</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nbackground = wf-background\n</code></pre> <p>See Autostart for more information.</p> <p>If you prefer swaybg, adapt the command as follows.</p> <p>Example \u2013 Simple:</p> <pre><code>swaybg --image /path/to/wallpaper.webp\n</code></pre> <p>Example \u2013 Random wallpaper:</p> <pre><code>find -L /path/to/wallpapers -type f | sort -R | head -n 1 | xargs swaybg --image\n</code></pre>"},{"location":"Tutorial/#adding-a-panel-and-dock","title":"Adding a panel and dock","text":"<p>You can use <code>wf-panel</code> and <code>wf-dock</code>, provided by wf-shell.</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\npanel = wf-panel\ndock = wf-dock\n</code></pre> <p>You can also use Waybar if you prefer it.</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nbar = waybar\n</code></pre> <p>See Autostart for more information.</p>"},{"location":"Tutorial/#configuring-viewport-switcher","title":"Configuring viewport switcher","text":"<p>See Viewport switcher for more information.</p> <p>If you want to switch to another workspace by pressing super+num where num is the number of the workspace you want to use.</p> <p>Follow the example below.</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[vswitch]\nbinding_0 = &lt;super&gt; KEY_0\nbinding_1 = &lt;super&gt; KEY_1\nbinding_2 = &lt;super&gt; KEY_2\nbinding_3 = &lt;super&gt; KEY_3\nbinding_4 = &lt;super&gt; KEY_4\nbinding_5 = &lt;super&gt; KEY_5\nbinding_6 = &lt;super&gt; KEY_6\nbinding_7 = &lt;super&gt; KEY_7\nbinding_8 = &lt;super&gt; KEY_8\nbinding_9 = &lt;super&gt; KEY_9\n</code></pre>"},{"location":"Tutorial/#configuring-your-outputs","title":"Configuring your outputs","text":"<p>See Output for more information, setting mirroring, custom modes, etc.</p> <p>Example configuration statically via Wayfire:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[eDP-1]\nmode = 1920x1080@60.000000 # or just 1920x1080\nlayout = 0,0\ntransform = normal\nscale = 1.000000\n</code></pre> <p>Kanshi supports more dynamic configuration, like switching profiles based on connected outputs:</p> <p><code>~/.config/kanshi/config</code></p> <pre><code>{\n  output eDP-1 mode 1920x1080 position 0,0\n}\n{\n  output eDP-1 mode 1920x1080 position 0,900\n  output HDMI-A-1 mode 1440x900 position 0,0\n}\n</code></pre> <p>You can get the names of your outputs with wlr-randr, or by inspecting the log of Wayfire (printed to stdout by default).</p> <p>And start kanshi on startup with Autostart.</p>"},{"location":"Tutorial/#notifications","title":"Notifications","text":"<p>Using mako:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nnotifications = mako\n</code></pre> <p>See Autostart for more information.</p>"},{"location":"Tutorial/#idle-configuration","title":"Idle configuration","text":"<p>Example configuration with swayidle and swaylock:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nidle = swayidle before-sleep swaylock\n\n[idle]\ntoggle = &lt;super&gt; KEY_Z\nscreensaver_timeout = 300\ndpms_timeout = 600\n</code></pre> <ul> <li>Disables the compositor going idle with Super + z.</li> <li>This will lock your screen after 300 seconds of inactivity, then turn off your displays after another 300 seconds.</li> </ul> <p>See Autostart and Idle for more information.</p> <p>Note: for now there is a trick for binding a key to instantly turn-off the screen (DPMS).</p>"},{"location":"Tutorial/#screen-locker","title":"Screen locker","text":"<p>Lock your screen with swaylock:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nbinding_lock = &lt;super&gt; KEY_ESC\ncommand_lock = swaylock\n</code></pre> <p>See Command for more information.</p>"},{"location":"Tutorial/#logout","title":"Logout","text":"<p>Use wayland-logout to kill the current compositor instance. Launch logout GUI wlogout:</p> <p><code>~/.config/wf-shell.ini</code></p> <pre><code>[panel]\nmenu_logout_command = wlogout\n</code></pre>"},{"location":"Tutorial/#changing-the-volume","title":"Changing the volume","text":"<p>Example \u2013 Changing the volume with ALSA:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nrepeatable_binding_volume_up = KEY_VOLUMEUP\ncommand_volume_up = amixer set Master 5%+\nrepeatable_binding_volume_down = KEY_VOLUMEDOWN\ncommand_volume_down = amixer set Master 5%-\nbinding_mute = KEY_MUTE\ncommand_mute = amixer set Master toggle\n</code></pre> <p>Example \u2013 Changing the volume with PulseAudio:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nrepeatable_binding_volume_up = KEY_VOLUMEUP\ncommand_volume_up = pactl set-sink-volume 0 +5%\nrepeatable_binding_volume_down = KEY_VOLUMEDOWN\ncommand_volume_down = pactl set-sink-volume 0 -5%\nbinding_mute = KEY_MUTE\ncommand_mute = pactl set-sink-mute 0 toggle\n</code></pre> <p>Example \u2013 Changing the volume with WirePlumber for PipeWire:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nrepeatable_binding_volume_up = KEY_VOLUMEUP\ncommand_volume_up = wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+\nrepeatable_binding_volume_down = KEY_VOLUMEDOWN\ncommand_volume_down = wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-\nbinding_mute = KEY_MUTE\ncommand_mute = wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle\n</code></pre> <p>See Command for more information.</p>"},{"location":"Tutorial/#changing-the-screen-brightness","title":"Changing the screen brightness","text":"<p>Example \u2013 Changing the screen brightness with Light:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[command]\nrepeatable_binding_light_up = KEY_BRIGHTNESSUP\ncommand_light_up = light -A 5\nrepeatable_binding_light_down = KEY_BRIGHTNESSDOWN\ncommand_light_down = light -U 5\n</code></pre> <p>Note: Make sure that the user is part of the <code>video</code> group, otherwise you will not get access to the devices.</p> <p>See Command for more information.</p>"},{"location":"Tutorial/#screen-color-temperature","title":"Screen color temperature","text":"<p>Adjust the color temperature of your screen with Redshift:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[autostart]\nredshift = redshift -m wayland\n</code></pre> <p>Note: Requires Redshift with Wayland support.</p> <p>See Autostart for more information.</p>"},{"location":"Tutorial/#taking-screenshots","title":"Taking screenshots","text":"<p>Taking screenshots with grim and slurp:</p> <p><code>~/.config/wayfire.ini</code></p> <p><pre><code>[command]\nbinding_screenshot = KEY_SYSRQ\ncommand_screenshot = grim $(date '+%F_%T').webp\nbinding_screenshot_interactive = &lt;shift&gt; KEY_SYSRQ\ncommand_screenshot_interactive = slurp | grim -g - $(date '+%F_%T').webp\n</code></pre> You can also use <code>wl-clipboard</code> in combination with <code>grim</code> and <code>slurp</code> capture a screenshot to clipboard. Put this entry in <code>[command]</code> section. <pre><code>binding_screenshot_clip = &lt;super&gt; &lt;ctrl&gt; KEY_S\ncommand_screenshot_clip = grim -g \\\"$(slurp)\" - | wl-copy\n</code></pre></p> <p>See Command for more information.</p>"},{"location":"Tutorial/#creating-screencasts","title":"Creating screencasts","text":"<p>See wf-recorder and wlrobs.</p>"},{"location":"Tutorial/#automatically-maximizing-windows","title":"Automatically maximizing windows","text":"<p>You can maximize specific windows by default with the following command:</p> <p><code>~/.config/wayfire.ini</code></p> <pre><code>[window-rules]\nalacritty = on created if app_id is \"Alacritty\" then maximize\n</code></pre> <p>You can get the properties of your applications with the following command:</p> <p><pre><code>WAYLAND_DEBUG=1 alacritty 2&gt;&amp;1 | kak\n</code></pre> See Window rules for more information.</p>"},{"location":"Tutorial/#remote-desktop","title":"Remote desktop","text":"<p>With virtual pointer support, programs like wayvnc are possible. No special wayfire configuration is required.</p>"},{"location":"View-life-cycle/","title":"View life cycle","text":"<p>This page discusses various aspects of a view's lifetime.</p>"},{"location":"View-life-cycle/#view-creation","title":"View creation","text":"<p>There are multiple steps which need to happen when a new view is created (either a client opens a new application window, or a plugin creates a custom view):</p> <ol> <li> <p>The view is allocated first. At this step, constructors may set member variables, connect to signals, etc. but usually have a restricted set of available operations, because the view's associated nodes (view root node, transformed node, surface root node) are not initialized yet. Views use the <code>tracking_allocator</code> interface to allocate memory and to keep track of all 'alive' views at a given time.</p> </li> <li> <p>The base view is initialized. This means that the aforementioned associated nodes are allocated. This and the previous steps are done together by <code>view_interface_t::create&lt;ConcreteViewType&gt;()</code>, which is what all view implementations should use.</p> </li> <li> <p>The concrete view implementation is initialized. This typically happens in a static factory method associated with the concrete view implementation class. At this step, the surface root node should be set. View implementations also typically set the view's output, set fullscreen or other state if necessary.</p> </li> <li> <p>The view is mapped. For plain views, this is as simple as emitting the view-mapped signal, attaching the view to the scenegraph and changing the internal mapped state (maintained in each view implementation) so that <code>view-&gt;is_mapped()</code> reports true.    For toplevels, this process is a bit more complicated:</p> <ul> <li>First, a transaction changing the toplevel's mapped state is started.</li> <li>When the transaction is being applied (or immediately after):</li> <li>Add the view to the scenegraph</li> <li>Add the view to the workspace set of its output</li> <li>Set the internal mapped state to true and emit view-mapped</li> </ul> </li> </ol>"},{"location":"View-life-cycle/#view-unmapping","title":"View unmapping","text":"<p>Unmapping views means making them 'inactive'. A view may be unmapped and mapped again multiple times. Unmapping views is relatively simple (for toplevels, there is one indirection step when a transaction is first started, and then when applying the unmapped state the following is done):</p> <ul> <li>Emit the view-pre-unmapped signal</li> <li>Set the internal state to unmapped</li> <li>Disable the view root node</li> <li>Emit view-unmapped</li> </ul>"},{"location":"View-life-cycle/#view-destruction","title":"View destruction","text":"<p>Views are managed as <code>shared_ptr</code>s, so views are really 'gone' when there are no more references to it. A view must be unmapped before being destroyed! In addition, the <code>destruction_signal&lt;view_interface_t&gt;</code> is emitted on a view right before freeing its memory. All custom data is also destroyed at this point.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/","title":"Views, Toplevels and Transactions","text":"<p>The aim of this page is to explain the concepts of views, toplevels and transactions and their interactions.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/#views","title":"Views","text":"<p>Views are an abstraction in Wayfire which represents any desktop surface without a parent. Typical examples include toplevel (application) windows, but also panels, backgrounds, etc.</p> <p>Views support adding transformers to them (used to implement various effects), and can report their title, app-id, be pinged or closed. These are the operations common for all types of views. Note that these views do not have any desktop-related state (fullscreen, maximized, etc.) and neither do they have geometry.</p> <p>Views are represented with multiple nodes in the scenegraph. First is the view root node, which, as the name indicates, contains the view and all of its child views (only toplevels have child views by default, but of course plugins can add arbitrary nodes here). The main purpose of this node is allowing plugins and core to quickly enable or disable the whole view tree, for example when the view is mapped/unmapped or minimized.</p> <p>After the view root node comes the transformed node. It is the node containg the main desktop surface only (and potentially any subsurfaces). The purpose of the transformed node is to indicate the chain of transformers, which are nodes between the transformed node down to the surface root node.</p> <p>The surface root node of a view is the node which represents the desktop surface + subsurfaces only. It is also the node which receives keyboard focus and defines the view position in the scenegraph (i.e. nodes above it work in output-local coordinates, but children of the surface root node have coordinates in view-local coordinates, that is, relative to the top-left corner of the view's main surface).</p> <p>It is noteworthy that view nodes typically clear all children of the surface root node before mapping and after unmapping.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/#toplevel-views","title":"Toplevel views","text":"<p>Toplevel views are a subclass of views which represent application windows. They have properties like geometry, tiled edges, fullscreen state, etc. managed by their toplevel subobject described below.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/#transactions","title":"Transactions","text":"<p>Transactions in Wayfire and many other compositors are a mechanism for applying multiple state changes to one or more objects atomically. For example, a view might be fullscreened and have its geometry updated at the same time (it would not make sense to say that the view is really fullscreen until the client submits a buffer with the full output resolution).</p> <p>Transactions are composed of transaction objects, which have very simple requirements. Namely, they have to support the commit and apply operations, and also emit the ready signal after committing, so that the transaction knows when all of its objects have become ready to be applied atomically.</p> <p>Because multiple transactions for the same object in parallel usually do not make sense, transactions are managed by the transaction manager. It sometimes delays transactions (and merges them with other transactions if needed) in order to avoid parallel transactions for the same object.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/#toplevels","title":"Toplevels","text":"<p>Toplevel objects are the bridge between toplevel views and transactions. Toplevels are transaction objects with state which can be committed and applied: geometry, decoration margins, fullscreen state, tiled edges.</p> <p>The commit operation requests the necessary state changes from the clients (for example, it requests that the client submits a new buffer with a particular size), and emits the ready signal when the client actually commits the new buffer. When the new state is applied, the toplevel updates the state of the view and the corresponding scenegraph nodes.</p>"},{"location":"Views%2C-Toplevels-and-Transactions/#current-and-pending-state","title":"Current and pending state","text":"<p>To achieve their purpose, toplevels expose two states: current and pending (internally, a third - committed - is maintained as well). The pending state generally describes the desired next state of the toplevel. Typically, plugins will update one or more pending members and then commit the toplevel. Until the client reconfigures and the transaction is applied, plugins may request further state changes. These changes are further accumulated in the pending state.</p> <p>Once a state change is applied, the current state is updated to reflect the currently displayed buffer of the application.</p>"},{"location":"%5BWIP%5D-Design-overview/","title":"[WIP] Design overview","text":"<p>The goal of this document is to describe the various components in Wayfire's core and elaborate a bit on how they interact with each other.</p> <p>Note 1: If you are not sure what a Wayland compositor is, make sure to first read some of the tasks of a wayland compositor to better understand what all of the classes below are needed for.</p> <p>Note 2: this isn't a full description of Wayfire's API. For details, refer to the corresponding header files and the doc strings for each method/field. Sometimes the doc strings can provide more context or explain why a certain feature is useful.</p>"},{"location":"%5BWIP%5D-Design-overview/#high-level-overview","title":"High-level overview","text":"<p>Wayfire follows a mostly object-oriented design (but individual functions are also present where that makes sense). As a result, most of the logic is structured around the following main classes:</p> <ul> <li>The singleton class <code>wf::core_interface_t</code>. It is a composition of various other classes, which have responsibility for output management, input handling and other smaller functionalities.</li> <li><code>wf::output_t</code> is a per-monitor object. It is again a composition of several inter-connected subobjects:</li> <li><code>render_manager_t</code> is the subobject responsible for all drawing operations and damage tracking.</li> <li><code>workspace_manager_t</code> is the subobject which keeps track of view stacking order and workspaces.</li> <li><code>plugin_loader</code> is the subobject which dynamically loads and unloads the plugins on each output.</li> <li><code>wf::view_interface_t</code> is an abstraction for any window-like entity. Typically used to represent client windows together with their position, transforms, child views (dialogs), decorations and more.</li> <li><code>wf::plugin_interface_t</code> is the base class for all plugins.</li> </ul> <p>These objects form a hierarchy: Plugins and Views are part of an Output, Outputs are part of Core.</p> <p>Communication between these objects is done in two main ways: for calls up in the hierarchy (e.g. views -&gt; output), a direct method call is used. For downward communication to outputs/views, methods are also often used, but communication with plugins is done only via signals and a few specialized callbacks (render hooks and input grabs). Both realize the Observer design pattern.</p> <p>The following sections should provide a little more detail on each of these parts.</p>"},{"location":"%5BWIP%5D-Design-overview/#core","title":"Core","text":"<p>This is the first object that gets created in Wayfire. It is usually accessed via <code>wf::get_core()</code> which returns the single instance of this class.</p>"},{"location":"%5BWIP%5D-Design-overview/#public-api","title":"Public API","text":"<ul> <li> <p><code>output_layout</code> is the pointer to the output layout manager. This object is responsible for managing the current configuration of outputs (their mode, position, scale, mirroring, DPMS, etc.), as well as for creating and destroying outputs when they are plugged and unplugged by the wlroots backend. It also is responsible for creating and destroying virtual outputs in case that no physical outputs are present.</p> </li> <li> <p><code>config</code> is the object where all of Wayfire's configuration is stored. This is the glue code between plugins (which directly consume options via <code>wf::option_wrapper</code>) and the configuration backend, which is responsible for populating the config manager with options and for updating it at runtime.</p> </li> <li> <p><code>protocols</code> contains objects to all wlroots-enabled protocols that core creates.</p> </li> <li> <p>Methods for controlling the focused layer (used by lockscreens &amp; similar)</p> </li> <li> <p>Methods for focusing a particular output</p> </li> <li> <p>Registering a view via <code>add_view</code></p> </li> <li> <p>Methods which are wrappers around seat and input related functionality - touch gestures, manipulating the cursor and keyboard focus.</p> </li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#private-members","title":"Private members","text":"<p>The core implementation (not public API, accessible by <code>wf::get_core_impl()</code>) has a few further important members:</p> <ul> <li> <p><code>input</code> is the object which contains input state like: currently active input grab, exclusive clients like lockscreens which disable input to other clients, active input devices.</p> </li> <li> <p><code>seat</code> represents a group of input devices which logically belong together. Each seat has a cursor and keyboard focus (which get the corresponding input events), has its own cursor image and position, and also supports primary selection, clipboard and drag-and-drop.</p> </li> </ul> <p>Note: While some wlroots compositors support multiple seats, Wayfire's design currently does not allow more than one.</p>"},{"location":"%5BWIP%5D-Design-overview/#output","title":"Output","text":"<p>Outputs are important objects in Wayfire. In contrast to some compositors like Mutter(GNOME), every output is almost completely independent from the others. This means: every output has its own set of workspaces. Each output has its own set of plugin instances. Different plugins (actually plugin instances) can be active on different outputs at the same time.</p>"},{"location":"%5BWIP%5D-Design-overview/#render-manager","title":"Render Manager","text":"<p>Render manager is, yet again, a composition of smaller modules with various rendering-related functionalities. Together, they have the following tasks:</p> <ul> <li> <p>Damage tracking. This is a technique employed by many compositors, which in nutshell means: track which regions of the output have changed (for example, a fullscreen client updates its left half, so the left half of the output needs to be updated).</p> </li> <li> <p>Frame scheduling and repaint delay: Whenever something on the output changes, schedule and wait for the next page flip (on DRM backend), then after a particular delay, repaint the output and swap the buffers (everything is double-buffered).</p> </li> <li> <p>Update workspace streams. Workspace streams are a mechanism used by Wayfire to update buffers on each frame with the contents of a particular workspace. For example, the Expo plugins has a workspace stream per workspace, and the corresponding buffers are then arranged next to each other on the output space.</p> </li> <li> <p>Keep track of various hooks and custom renderers. The default Wayfire renderer simply has a workspace stream to the output's buffer. However, plugins can override the default renderer to achieve different perspectives of the workspaces and windows (cube, expo), and can also add various overlays and postprocessing effects.</p> </li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#workspace-manager","title":"Workspace Manager","text":"<p>Workspace manager is also a composition of multiple subobjects. Its main tasks are:</p> <ul> <li>Keep track of the stacking order of views. All views on an output are part of a tree-like structure:</li> <li> <p>The workspace manager has a list of layers. These are used for rough ordering of the views, and differentiating them by their role (i.e panels, backgrounds, regular views, menus). The available layers and their Z-ordering are hardcoded.</p> </li> <li> <p>Each layer consists of several sublayers. A sublayer is a container of several views, which are kept together in their stacking order relative to other views, but views inside a sublayer can be reordered relative to each other. A layer has three types of sublayers:</p> <ul> <li>sublayers docked below: Fixed-position sublayers, always below other views in the layer.</li> <li>sublayers docked above: Fixed-position sublayers, always above other views in the layer.</li> <li>floating sublayers: sublayers below the docked sublayers, they can be reordered wrt. each other.</li> </ul> </li> <li> <p>An exception to this Z-ordering are fullscreen views. If and only if a fullscreen view is the topmost view in the workspace layer, this view is temporarily pushed on top of panels (it is promoted). However, as soon as another view is restacked on top of the fullscreen view, it loses its promoted status.</p> </li> <li> <p>Keep track of the current workspace, and view &lt;-&gt; workspace mappings. In Wayfire, workspaces are arranged in a grid, and each workspace has different coordinates (the current workspace starts at <code>(0, 0)</code>, the one on the left at <code>(1920, 0)</code> if <code>1920</code> is the output's logical size). Since workspace's coordinates are relative to the current workspace, each workspace's coordinates actually change whenever the current workspace changes.</p> </li> <li> <p>Views are not constrained to a single workspace. They can be visible on two or more workspaces, depending on their geometry.</p> </li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#plugin-loader","title":"Plugin Loader","text":"<p>This is perhaps the simplest part of an output. The plugin loader is created after an output has been initialized, and it creates a plugin instance for each enabled plugin for this output. This plugin is then destroyed if it is disabled in the config file or the output is destroyed.</p>"},{"location":"%5BWIP%5D-Design-overview/#views","title":"Views","text":"<p>The <code>wf::view_interface_t</code> class is the base class for all windows visible on the screen. In the most basic sense, they are axis-aligned 2-D rectangles with some content, which can be moved around and managed by plugins. Each view has a position, size, bounding box (including subsurfaces, see the points below), all of which are located in the output-workspace-local coordinate system. In other words, their coordinates are relative to the current workspace.</p>"},{"location":"%5BWIP%5D-Design-overview/#view-types","title":"View types","text":"<p>There are 4 main types of views:</p> <ul> <li>Views which represent client windows. These views are all subclasses of <code>wf::wlr_view_t</code> (not part of the API). </li> <li><code>xdg-shell</code> views, they are used for Wayland-native clients.</li> <li><code>xwayland</code> views. There are several subtypes of views here, depending on what the Xwayland view is.</li> <li><code>layer-shell</code> views. These are created for special clients like panels, backgrounds, etc., which utilize the layer-shell protocol.</li> <li>Views which have compositor-generated content. Examples of such views include colored rectangles used for previewing view geometry (for example Move's snap previews), or they can mirror the contents of another view. The latter case can be useful in case the view needs to be visible on multiple locations (or even multiple outputs) at the same time.</li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#subsurfaces-and-dialogs","title":"Subsurfaces and dialogs","text":"<p>Views can have two types of children: dialogs (part of the view tree) and subsurfaces (part of their surface tree). There are several notable differences:</p> <ul> <li> <p>Dialogs (child views) are views on their own. They are basically glued to the main view and are not kept separately in the stacking order of workspace-manager. However, because they are views, they can be moved around, they can have their own transforms, etc. Dialogs can be modal (they are always focused instead of the main views) or non-modal, in which case both the view and the dialogs can be focused. Note that in any case, dialogs remain on top of their parent.</p> </li> <li> <p>Subsurfaces are not views, they are inseparable parts of the view. They are included in the view's bounding box, move together with the view and have the same transforms applied to them (rotation, scaling, etc.). Subsurface lifetime is tied to that of their main view, and are unmapped/destroyed together with it.</p> </li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#transformers","title":"Transformers","text":"<p>A good number of plugins need to present views in a different way than they typically appear. For example, the Scale plugin needs to scale down and  translate views while it is active. Sometimes, the background views have to be dimmed a bit, or a view's background needs to be blurred. All of this is implemented via a mechanism called view transformers. Each view can have multiple transformers attached to it. In each transformation step (each transformer), the view is rendered to an auxiliary buffer, and its coordinates are changed according to the transformer. In this way, we can achieve arbitrary combination of transformers, each of which can use a different OpenGL shader and settings.</p>"},{"location":"%5BWIP%5D-Design-overview/#view-state","title":"View state","text":"<p>Each view can be in a number of states. It can be fullscreen, maximized (in the code tiled), minimized or sticky. Note that changing the view's state should almost never be done by setting <code>view-&gt;fullscreen</code> &amp; co directly. Instead, you should at least use the wrapper functions <code>set_fullscreen()/...</code>, or even better, <code>request_fullscreen()/...</code>. The former does basic sanity checking for the new state of the view, and might perform a few necessary actions, and will notify plugins of the change. The latter will allow core and/or other plugins to actively react to the change in the state - for example, <code>request_fullscreen()</code> will actually change the view size to match the full output size, and will also trigger an animation with the Grid plugin, if it is enabled.</p>"},{"location":"%5BWIP%5D-Design-overview/#plugins","title":"Plugins","text":"<p>Plugins are the most important feature in Wayfire. Its philosophy is: almost everything is a plugin! This allows the user to overwrite most of the compositor's behavior and/or add new powerful features. Most plugins are meant to be self-sufficient and to not interact with other plugins directly (with a few notable exceptions).</p>"},{"location":"%5BWIP%5D-Design-overview/#life-time","title":"Life-time","text":"<p>The life-time of a plugin is like this:</p> <ul> <li>For each new output, an output-local instance is created for each plugin. There are also mechanisms for having shared data between instances, or having a single instance.</li> <li>For each removed output, the output-local instance of each plugin is destroyed.</li> <li>If a plugin is disabled in the config, then all instances on all outputs are destroyed.</li> </ul>"},{"location":"%5BWIP%5D-Design-overview/#internal-plugin-architecture","title":"Internal plugin architecture","text":"<p>A typical plugin will register callbacks for various signals, effect hooks and bindings in its <code>init()</code> function. Then, the plugin reacts to these events, keeps internal state, and calls core or other plugins to achieve its purpose.</p>"},{"location":"%5BWIP%5D-Design-overview/#plugin-interaction","title":"Plugin interaction","text":"<p>Plugins interact with each other in one of the following ways:</p> <ul> <li>Synchronizing/communicating via core interfaces. For example, a plugin calls <code>view-&gt;request_maximize()</code>, core emits a signal and another plugin carries out this action.</li> <li>Creating common interfaces, which are like extensions of core's own interfaces. As an example, take the wobbly plugin: it provides an extension to the view interface, where you can trigger a set of predefined actions (anchoring, translating, resizing, etc.).</li> <li>Some plugins export some of their functionality in their headers (e.g. workspace-wall). These plugins are then not manually enabled in the config file by the user, they are directly included in each plugin which needs them.</li> <li>Using capabilities. A plugin can request that it is activated with certain capabilities. This means, it wants exclusive access to certain parts of Core. For example, a plugin which wishes to grab input via input grabs (there can only be one grab at a time!) need to activate with the input grabbing capability. If other plugins attempt to activate this way, they will fail in the activation stage and will thus know that they cannot proceed.</li> </ul>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/","title":"[WIP] What does a compositor do?","text":"<p>The goal of this page is to briefly explain what a Wayland compositor is responsible for in a typical setup. See also the wayland docs</p>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/#general","title":"General","text":"<p>The compositor is (very roughly) the GUI part of an operating system. It provides a graphical environment for applications, manages input and output devices, and more.</p>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/#rendering","title":"Rendering","text":"<p>In Wayland, regular applications (clients) draw to an off-screen buffer. Then they present this buffer (commit it) to the compositor. In Wayfire and many other compositors, these buffers are uploaded or converted to OpenGL ES textures.</p> <p>Finally, whenever a new frame can be drawn (depending on hardware refresh rate), the compositor is responsible for updating the portion of the output which actually changed.</p>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/#window-management","title":"Window management","text":"<p>In contrast to X11, in Wayland every application works in almost complete isolation from the other clients. Clients do not even know their position on the screen. Thus, a Wayland compositor needs to keep track of the position of each window, which outputs it is visible on, whether it has a decoration or not, what transforms are applied (for ex. in various effects), etc.</p> <p>A wayland compositor will also act as a X11 window manager for Wayland windows: it is responsible for interactive move/resize operations, it provides workspaces, it provides effects like alt-tab window switching, maximizing, fullscreening, minimizing windows, etc.</p>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/#input-event-handling-and-forwarding","title":"Input event handling and forwarding","text":"<p>Since clients have no idea about their position, stacking order, etc., the compositor is also responsible for receiving input events from the drivers (typically via libinput), and then processing them. A compositor would typically have a list of key and button bindings (<code>Alt-Tab</code>, <code>&lt;super&gt; + KEY_LEFT</code> to start interactively moving a window). When an input event arrives, first the bindings are checked, if none match the input event, then the appropriate client is selected and the event is forwarded to it.</p> <p>This allows the compositor to support many different modes of operation, and also to pass the correct position to a transformed window.</p>"},{"location":"%5BWIP%5D-What-does-a-compositor-do%3F/#various-other-functionalities","title":"Various other functionalities","text":"<p>The compositor also has a lot of other functionalities it can (and should) offer. Here is a non-exhaustive list:</p> <ul> <li>Managing multiple outputs, their logical positions, modes, output mirroring, etc.</li> <li>Tracking user idleness, e.g. turning off monitors after X seconds of inactivity to conserve power.</li> <li>Provide support for virtual input devices</li> <li>Facilitate copy-paste and drag-and-drop operations (remember, clients don't know much about each other!)</li> <li>Implement screensharing/recording protocols (wlr-screencopy-v1, or PipeWire/xdg-desktop-portal)</li> <li>Support legacy Xwayland clients</li> </ul>"}]}